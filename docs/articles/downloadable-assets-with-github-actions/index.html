<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-articles/downloadable-assets-with-github-actions/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Downloadable Assets with GitHub Actions | thorsten.suckow-homberg.de</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://thorsten.suckow-homberg.de/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://thorsten.suckow-homberg.de/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://thorsten.suckow-homberg.de/docs/articles/downloadable-assets-with-github-actions/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Downloadable Assets with GitHub Actions | thorsten.suckow-homberg.de"><meta data-rh="true" name="description" content="Pack and publish your releases with GitHub Actions"><meta data-rh="true" property="og:description" content="Pack and publish your releases with GitHub Actions"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://thorsten.suckow-homberg.de/docs/articles/downloadable-assets-with-github-actions/"><link data-rh="true" rel="alternate" href="https://thorsten.suckow-homberg.de/docs/articles/downloadable-assets-with-github-actions/" hreflang="en"><link data-rh="true" rel="alternate" href="https://thorsten.suckow-homberg.de/docs/articles/downloadable-assets-with-github-actions/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://YP7SUYRV93-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="thorsten.suckow-homberg.de RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="thorsten.suckow-homberg.de Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="thorsten.suckow-homberg.de" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.9c509722.css">
<link rel="preload" href="/assets/js/runtime~main.0841b500.js" as="script">
<link rel="preload" href="/assets/js/main.dfe81c34.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/home.svg" alt="Home" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/home.svg" alt="Home" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/articles/">Articles</a><a class="navbar__item navbar__link" href="/docs/toolbox">Toolbox</a><a class="navbar__item navbar__link" href="/projects">Projects</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/about">About</a><a href="https://github.com/thorstensuckow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/articles/">Articles</a><button aria-label="Toggle the collapsible sidebar category &#x27;Articles&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/software-craftsmanship/">On Software Craftsmanship</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/docs/articles/agp-the-payroll-system/introduction">The Payroll System</a><button aria-label="Toggle the collapsible sidebar category &#x27;The Payroll System&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/agp-the-payroll-system/Use-Case-1-Adding-a-new-employee">Use Case 1 - Adding a new employee</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/dependency-injection-in-javascript/">Dependency Injection in JavaScript</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/sencha-extjs-beyond-es5/">Ext JS - Beyond ES5</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/using-php-enums-as-method-calls/">Using PHP enums as method calls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/articles/downloadable-assets-with-github-actions/">Downloadable Assets with GitHub Actions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/docs/articles/creating-extjs-applications-with-coon-js/">Creating ExtJS applications with coon.js</a><button aria-label="Toggle the collapsible sidebar category &#x27;Creating ExtJS applications with coon.js&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/creating-extjs-applications-with-coon-js/introduction">Part 1: Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/creating-extjs-applications-with-coon-js/packages-and-configuration-options">Part 2: Packages and Configuration Options</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/creating-extjs-applications-with-coon-js/configuration-details-and-plugins">Part 3: Configuration Details and defining Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/creating-extjs-applications-with-coon-js/registering-services-and-using-the-service-locator">Part 4: Registering services and using the Service Locator</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/javascript-promises-return-values-and-error-handlers/">JavaScript Promises — Return Values and Error Handlers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/a-fluent-interface-for-javascript-promises/">Fluent Interface for JavaScript Promises</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/php-default-time-zones-and-dst/">PHP, default time zones and DST</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/articles/"><span itemprop="name">Articles</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Downloadable Assets with GitHub Actions</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Downloadable Assets with GitHub Actions</h1></header><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><div>This article was originally published in <!-- -->May 2022<!-- --> at <a target="_blank" href="https://medium.com/@thorstensuckow/downloadable-assets-with-github-actions-e39b76371337">medium.com</a>. Some formatting might have get lost during the migration to this site: If you think you spotted an issue caused by malformed formatting, please <a href="mailto:thorsten@suckow-homberg.de">let me know</a>.</div></div></div><p>GitHub Actions is (<em>sic!</em>) a great tool to automate the build process of your software projects. Providing a configurable and extensible CI/CD-platform, developers can test, build and deploy their projects by writing a few lines of YAML.</p><p>This article demonstrates how to add downloadable assets to a release when using GitHub Actions with a Sencha Ext JS project. The implementation of the actions is — of course — applicable with any other project.</p><p>The article assumes you are already familiar with the concept of CI/CD and that you have used GitHub Actions (or any other build tool) before. If not, the two following resources should get you started:</p><ul><li><a href="https://martinfowler.com/delivery.html" target="_blank" rel="noopener noreferrer">Software Delivery Guide (martinfowler.com)</a></li><li><a href="https://docs.github.com/en/actions" target="_blank" rel="noopener noreferrer">GitHub Actions Documentation</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="motivation">Motivation<a href="#motivation" class="hash-link" aria-label="Direct link to Motivation" title="Direct link to Motivation">​</a></h2><p>A regular build pipeline for creating a release with GitHub Actions looks like this:</p><p><img loading="lazy" src="https://cdn-images-1.medium.com/max/4096/1*lQpJIwGP9fC_ojUzLQgAJQ.jpeg" class="img_ev3q"></p><p>This is a very optimistic approach to a build pipeline as this assumes that each step succeeds. We will also not go into detail of each build step since various sub-tasks might be involved. However, when working with Sencha Ext JS projects (or any other project available via NPM), we can unfold the build pipeline a little bit more:</p><p><img loading="lazy" src="https://cdn-images-1.medium.com/max/4096/1*aSnJkpYzfInBGwTFvogWEg.jpeg" class="img_ev3q"></p><p>Of interest for us is the part where the downloads are created. actions/create-release@1 usually provides a tar- and a zip-file of the project-files as found in the repository, representing a git-tagged snapshot of the project.</p><p>However, we want to also include a build of the NPM project itself. If we only provide the downloads as created by actions/create-release@1, the user would still have to build the project on his own. Our ideal and final build pipeline would look like this:</p><p><img loading="lazy" src="https://cdn-images-1.medium.com/max/4096/1*1vx-hEy4z-KWugaTBKG9mQ.jpeg" class="img_ev3q"></p><p><img loading="lazy" src="https://cdn-images-1.medium.com/max/2000/1*_2Ty-TpS8Dj1HIiKiyi7rg.png" alt="Our goal is to automate the deployment of our project hosted at GitHub — including the repository contents as well as a zipped build available for downloading." class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-build">Basic Build<a href="#basic-build" class="hash-link" aria-label="Direct link to Basic Build" title="Direct link to Basic Build">​</a></h2><p>The basic script for creating a release with GitHub Actions looks like this:</p><div style="text-align:center;margin:20px"><div><iframe width="100%" frameborder="0" id="gist-1e1e3e59ee8ac6d3ee8aef317d21b3f8"></iframe></div><div style="text-align:center"><sup><b>Source 1</b> <span></span></sup></div></div><p>This script is invoked whenever we git push origin v1.2.3 to our repository (“v1.2.3” as a mere example for a version tag given the <a href="https://semver.org/" target="_blank" rel="noopener noreferrer">semver-syntax</a>). workflow_dispatch allows us to run the script manually.</p><p>We then define the build-job, consisting of two steps: <strong>checkout</strong> and <strong>create release</strong>.</p><p>Two pre-defined actions are used here: <a href="https://github.com/actions/checkout" target="_blank" rel="noopener noreferrer">actions/checkout@v2</a> and <a href="https://github.com/actions/create-release" target="_blank" rel="noopener noreferrer">actions/create-release@v1</a>. They should be self explanatory: The first one simply checks out the code of our repository, the second one creates the <em>tar</em> and <em>zip</em> for this checkout and adds them as downloads to the <strong>Releases</strong>-page of the GitHub repository we’re working with.</p><p><em>Note: At this point, the <strong>checkout </strong>action is not really necessary, since the <strong>create-release </strong>action does not depend on it and will work just fine without it. We’ll get back to it shortly.</em></p><p><img loading="lazy" src="https://cdn-images-1.medium.com/max/3030/1*MlCXqk5owtwU6eDjJaccjg.png" alt="Releases are ordered by their most recent date. A Release’s downloadable assets can be found here, by default providing a tar and a zip of the checked out repository-contents." class="img_ev3q"></p><p>We’re missing a few more steps — the <strong>build</strong> and the <strong>upload</strong> of a deployable build so we can access it as a downloadable asset. Let’s add these steps now.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="intermission-providing-repository-secrets">Intermission: Providing Repository Secrets<a href="#intermission-providing-repository-secrets" class="hash-link" aria-label="Direct link to Intermission: Providing Repository Secrets" title="Direct link to Intermission: Providing Repository Secrets">​</a></h2><p><em>The following explains how to provide a repository secret with GitHub for authentication with the Sencha NPM repository. Although the Sencha NPM is used here, the concept is the same for any other private NPM repository where authentication is required during the build process.</em></p><p>Some NPM repositories are private and require a registered user when npm i one of its packages. This is usally done by using the cli command <a href="https://docs.npmjs.com/cli/v8/commands/npm-adduser" target="_blank" rel="noopener noreferrer">npm adduser/login</a>:</p><p>$ npm login — -registry=<!-- -->[registry_url]</p><p>… which triggers a sign-in process that allows you to provide a username and a password to sign in at the specified registry. However, our build script does not run in an interactive environment (hence the buzzword “automation”), and that is why we have to provide a <strong><em>secret</em></strong>. A secret — in terms of our CI/CD environment — is simply a variable (a <em>template placeholder</em> would also be a valid description for it) that gets replaced during the build with its actual value — hidden from everyone except for the build system itself. We do not want anyone to be able to read our passwords, do we?</p><p>The Sencha NPM-repository is private and requires a registered user for downloading the Ext JS SDK. A registered user is either the owner of a commercial license of the SDK, or a user registered for a 30-days trial version of the framework (more info <a href="https://www.sencha.com/products/extjs/evaluate/" target="_blank" rel="noopener noreferrer">here</a>). To actually resolve the dependencies for our project during npm ci, we need to provide our Sencha NPM credentials during the automated build process. It must be part of the build script itself, but how do we keep it secret?</p><p>It all boils down to the following two commands that have to be executed before npm ciis invoked:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   $ </span><span class="token function" style="color:rgb(80, 250, 123)">npm</span><span class="token plain"> config </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">set</span><span class="token plain"> @sencha:registry </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">https://npm.sencha.com</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">https://npm.sencha.com</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   $ </span><span class="token function" style="color:rgb(80, 250, 123)">npm</span><span class="token plain"> config </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">set</span><span class="token plain"> //npm.sencha.com/:_authToken</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${{secrets.TOKEN}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>… whereas ${{secrets.TOKEN}} is the authentication token that can be used for authenticating a registered user with the Sencha NPM repository. The variable makes sure that no login credentials (better: the token) is stored as cleartext in the build script. We now have to tell the GitHub Actions where it can find the secret.</p><ol><li><p>Active and valid tokens can be found in the users <a href="https://docs.npmjs.com/cli/v8/configuring-npm/npmrc" target="_blank" rel="noopener noreferrer">.npmrc</a> on the user’s machine. The first step would be to locate the <em>.npmrc</em>-file (on Windows, it’s usually store under %HOMEPATH%) and find the authentication token used with the Sencha NPM repository. Copy it to the clipboard.</p></li><li><p>We now return to our respository over at GitHub.com and navigate to the settings of our repository (that would be the repository for which we’re writing the action).</p></li></ol><p><img loading="lazy" src="https://cdn-images-1.medium.com/max/2000/1*R7gKeTZea0QjtpB_TP6mfg.png" alt="**Settings** can be found at the left side of the tab bar of a GitHub.com-repository." class="img_ev3q"></p><ol start="3"><li>Once we have clicked the Settings tab and the page content’s have been loaded, we’re presented with a menu on the left side of the screen. Find the entry <strong><em>Secrets</em></strong> from the menu, and activate it so its sub menu gets shown. Then click its entry <strong>Actions</strong>.</li></ol><p><img loading="lazy" src="https://cdn-images-1.medium.com/max/2000/1*6u37VDIVDHeuSOqEf2_grA.png" alt="Part of the menu when visiting the **Settings** of a GitHub repository. We need to activate **Secrets &gt; Actions**." class="img_ev3q"></p><ol start="4"><li>The right side of the screen will now load any existing secret for updating or removing its value. We choose to add a new secret so we can store the authentication token for the private NPM repository.</li></ol><p><img loading="lazy" src="https://cdn-images-1.medium.com/max/2000/1*mhE0tgpym--6r82ncLRBZw.png" alt="No secrets for this repository so far. Click **New repository secret** for adding the authentication token for the private NPM repository." class="img_ev3q"></p><ol start="5"><li>In out build script, we want to refer to the authentication token with the variable <code>${{secrets.TOKEN}}</code> ( since TOKEN is very generic, you’re free to choose any other name).</li></ol><p><img loading="lazy" src="https://cdn-images-1.medium.com/max/2000/1*T067fFJW8DHjRznd3l8hqQ.png" alt="… finally, we can add the secret by providing a name — and the token itself (screenshot shows a randomized token)" class="img_ev3q"></p><ol start="6"><li>Click <strong>Add secret</strong></li></ol><p>Et voila, <strong>Settings &gt; Secrets &gt; Actions</strong> will now list your recently added secret token. You can now use it for this repository’s build scripts.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="onboarding-the-build-software">Onboarding the Build Software<a href="#onboarding-the-build-software" class="hash-link" aria-label="Direct link to Onboarding the Build Software" title="Direct link to Onboarding the Build Software">​</a></h2><p>Finally, let’s add the <strong>checkout</strong> build step to good use.</p><p>If a new developer joins an ongoing software project, he/she has to set up his/her local development environment, clone the repository and build the project. That’s exactly what’s happening now: A new dev joins the tem, if only briefly and in the form of an automated process: Let’s onboard the GitHub Action!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="preparing-the-build">Preparing the build<a href="#preparing-the-build" class="hash-link" aria-label="Direct link to Preparing the build" title="Direct link to Preparing the build">​</a></h3><p>We require several more actions:</p><ol><li><p><strong>Install Node.js</strong> — in order to use <em>npm</em>, our build environment needs of course Node.js. Luckily, there is already <a href="https://github.com/actions/setup-node" target="_blank" rel="noopener noreferrer">actions/setup-node@v2</a> available, so we simply have to tell our script to use it. With the help of <a href="https://docs.github.com/en/actions/using-jobs/using-a-matrix-for-your-jobs" target="_blank" rel="noopener noreferrer">matrix strategies</a> we’re also able to run the build with different versions of Node.js to guarantee (backwards) compability —v16 will do for now</p></li><li><p><strong>Provide an authentication token</strong> for the private NPM repository — as explained in the previous section of this article, <a href="https://npm.sencha.com" target="_blank" rel="noopener noreferrer">https://npm.sencha.com</a> requires a valid user. With the help of <strong>Repository Secrets</strong>, we’re able to provide this token for the automated build process now</p></li><li><p><strong>Install dependencies</strong> with npm ci — this will make sure all libraries required for our project are installed. Once this process finishes, we can run the <em>actual build script </em>defined for our project</p></li><li><p><strong>Create a deployable build</strong> with npm run build — this is the build script locally available <em>for our project</em></p></li><li><p><strong>Create a zip file </strong>— pack the files created with npm run build and create a zip-file from it. This will be the asset that gets added to the release in the next step</p></li></ol><p>Here are the additional steps we have just described. The indentation is off for a few lines to remain readability. Also note the path used at the end of this build step: We assume the project build to be bundled in the directory ./build/myproject — of course, you’d have to adjust the path here to make sure the correct files end up in release.zip — which is saved relative to the build-directory at the same location where the script was invoked from.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> npm (Node.js $</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> matrix.node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">version </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">node@v2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">with</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">node-version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> matrix.node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">version </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">cache</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;npm&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> npm ci</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">           npm config set @sencha:registry [https://npm.sencha.com/](https://npm.sencha.com/)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         npm config set //npm.sencha.com/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">_authToken=$</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">secrets.TOKEN</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           npm ci </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">save</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">dev</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Build Ext JS &amp; zip build</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">          npm run build</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">          cd ./build/myproject &amp;&amp; zip -r ../../release.zip ./*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-the-build-as-an-asset-to-the-release">Adding the build as an asset to the Release<a href="#adding-the-build-as-an-asset-to-the-release" class="hash-link" aria-label="Direct link to Adding the build as an asset to the Release" title="Direct link to Adding the build as an asset to the Release">​</a></h3><p>The build pipeline is almost ready to go — one last step is missing: The action to upload the previously created zipped build along with the release we’re just creating.</p><p>We have previously seen how to use actions/create-release- a predefined action from GitHub. We have also defined an id for this: id:create_release. This can now be used for querying properties published by the build step.</p><p>Again, GitHub provides the necessary action so we do not have to write it ourselves: <a href="https://github.com/actions/upload-release-asset" target="_blank" rel="noopener noreferrer">actions/upload-release-asset</a> is now used with a few additional configurations:</p><ol><li><p>upload_url — the url to upload the asset to. This is the location of the release we have created with our create-release-step, and can be identified by ${{steps.create_release.outputs.upload_url}}</p></li><li><p>asset_path — the path to the asset we want to upload</p></li><li><p>asset_name — the name used for the asset. It’s a good practice to refer to the tag used with this release in its name: myproject.build.${{github.ref}}.zip</p></li><li><p>asset_content_type — the content-type of the asset. In our case, it will be application/zip</p></li></ol><p>Here’s the build step in detail:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Upload assets</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> actions/upload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">release</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">asset@v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">GITHUB_TOKEN</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> secrets.GITHUB_TOKEN </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">with</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">upload_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> steps.create_release.outputs.upload_url </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">asset_path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ./release.zip</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">asset_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> myproject.build.$</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> github.ref </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">.zip</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">asset_content_type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> application/zip</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Note: We’re using the GITHUB_TOKENin this build step to make sure our read/write-operations succeed. The GITHUB_TOKEN is also used in the create-release build step.This token is an authentication token to make sure the build script and its actions may read from/write to a given repository. To learn more about this environment-secret, refer to its <a href="https://docs.github.com/en/actions/security-guides/automatic-token-authentication" target="_blank" rel="noopener noreferrer">documentation</a>.</em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-final-build-script">The Final Build Script<a href="#the-final-build-script" class="hash-link" aria-label="Direct link to The Final Build Script" title="Direct link to The Final Build Script">​</a></h2><p>This is the final build script. If you want to use it in your project, make sure to adjust paths and names, as this script uses an environment defined within the <a href="https://github.com/conjoon" target="_blank" rel="noopener noreferrer">conjoon</a>-organization of GitHub.</p><div style="text-align:center;margin:20px"><div><iframe width="100%" frameborder="0" id="gist-f289a4b483b97706808fd72588385952"></iframe></div><div style="text-align:center"><sup><b>Source 2</b> <span></span></sup></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/thorstensuckow/thorsten.suckow-homberg.de/tree/main/docs/articles/downloadable-assets-with-github-actions/index.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-05-02T15:03:26.000Z">May 2, 2023</time></b> by <b>Thorsten Suckow-Homberg</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/articles/using-php-enums-as-method-calls/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Using PHP enums as method calls</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/articles/creating-extjs-applications-with-coon-js/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Creating Ext JS Applications with coon.js</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#motivation" class="table-of-contents__link toc-highlight">Motivation</a></li><li><a href="#basic-build" class="table-of-contents__link toc-highlight">Basic Build</a></li><li><a href="#intermission-providing-repository-secrets" class="table-of-contents__link toc-highlight">Intermission: Providing Repository Secrets</a></li><li><a href="#onboarding-the-build-software" class="table-of-contents__link toc-highlight">Onboarding the Build Software</a><ul><li><a href="#preparing-the-build" class="table-of-contents__link toc-highlight">Preparing the build</a></li><li><a href="#adding-the-build-as-an-asset-to-the-release" class="table-of-contents__link toc-highlight">Adding the build as an asset to the Release</a></li></ul></li><li><a href="#the-final-build-script" class="table-of-contents__link toc-highlight">The Final Build Script</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">copyright © 2023 <a href="/imprint">Thorsten Suckow-Homberg</a>. Except where otherwise noted, the content on this page is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.0841b500.js"></script>
<script src="/assets/js/main.dfe81c34.js"></script>
</body>
</html>