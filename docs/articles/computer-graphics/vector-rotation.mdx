---
title: "Rotations as a Special Case of Vector Transformations"
description: "Rotations as a Special Case of Vector Transformations, with Applications to Game World Modeling"
---

import {BackButton} from "../../../src/components/BackButton.js";
import {Figure, BibRef, GlosRef} from "../../../src/components/References";
import {Embed} from "../../../src/components/Embed";
import CodeBlock from '@theme/CodeBlock';

import sinecosine from "./img/vector-rotation/sinecosine.png";
import sinecosine_code from '!!raw-loader!./plots/vector-rotation/sinecosine.py?raw';

import rotation_origin from "./img/vector-rotation/rotation_origin.png";
import rotation_origin_code from '!!raw-loader!./plots/vector-rotation/rotation_origin.py?raw';

import rotation_point from "./img/vector-rotation/rotation_point.png";
import rotation_point_code from '!!raw-loader!./plots/vector-rotation/rotation_point.py?raw';

export const figures = {
    sinecosine: 1,
    rotation_origin : 2,
    rotation_point : 3,
    rodrigues: 4,
    axis_rotation: 5,
    vector_projection: 6,
    rotation_discrepancy: 7
};

# Rotation

Given an orthonomal basis in $\mathbb{R}^3$, we now derive a matrix for rotating a vector $\vec{v}$ around the $x$-axis.
Recall the rotation matrix $\boldsymbol{R}_x$

$$

\boldsymbol{R}_x = \begin{pmatrix}
 &1 &0 &0 \\
 &0 &\cos &-\sin \\
 &0 &\sin &\cos
\end{pmatrix}

$$

We can think of $x$ as the stationary axis the other two axis $y$ and $z$ rotate around.

Since the $x$-component of the rotated vector stays the same, the only components that change are $\vec{v}_y$ and $\vec{v}_z$.
This is clearly shown by the rotation matrix when multiplying it with an arbitrary vector:

$$

\begin{pmatrix}
&1 &0 &0 \\
&0 &\cos &-\sin \\
&0 &\sin &\cos
\end{pmatrix} \cdot \begin{pmatrix}\vec{v}_x \\ \vec{v}_y \\ \vec{v}_z\end{pmatrix} = \begin{pmatrix}\vec{v}_x \\ \vec{v}_y \cos - \vec{v}_z \cos \\ \vec{v}_y \sin + \vec{v}_z \cos\end{pmatrix}

$$


## Vector Rotation as a Linear Combination

In an orthonormal basis with the **standard basis vectors** $\vec{x} = \begin{pmatrix} 1\\0\end{pmatrix}$, $\vec{y} = \begin{pmatrix} 0\\1\end{pmatrix}$, any vector of unit length can be expressed as

$$
\vec{v} = \begin{pmatrix} \cos \Theta \\ \sin \Theta \end{pmatrix}
$$

This follows directly by $\cos \Theta, \sin \Theta$ when writing $\vec{v}$ as a linear combination of the two linear independent vectors $\vec{x}, \vec{y}$:

$$
\vec{v} = a \vec{x} + b \vec{y} 
$$

Substituting $a, b$ with $\cos \Theta$, $\sin \Theta$, we have:


$$
\vec{v} = \cos \Theta \begin{pmatrix} 1 \\ 0 \end{pmatrix} + \sin \Theta  \begin{pmatrix} 0 \\ 1 \end{pmatrix} = \begin{pmatrix} \cos \Theta \\ \sin \Theta \end{pmatrix}
$$

or, as a matrix multiplication

$$
\begin{pmatrix} 1 &0 \\ 0 &1 \end{pmatrix} \begin{pmatrix} cos \Theta \\\sin \Theta \end{pmatrix} = \vec{v}
$$

(Observe how $\vec{x}, \vec{y}$ represent the identity matrix $I_{2}$).



In [Figure {figures.sinecosine}](#fig:sinecosine), the angle $\Theta$ represents the amount of rotation of $\vec{v}$ around the origin[^dot_product]. 

[^dot_product]: See [Orthogonality of Unit Vectors](/docs/articles/computer-graphics/dot-product#orthogonality-of-unit-vectors)


<a name="fig:sinecosine" />
<Embed
    modeAware={true}
    figure={figures.sinecosine}
    title={
        "The vector v is rotated around the origin by θ degree, resulting in vector v'."}>
    <img src={sinecosine}  />
</Embed>
<details>
<summary>Plot-Code (Python)</summary>

<CodeBlock language="python">
  {sinecosine_code}
</CodeBlock>

</details>

We claim that 

$$
\vec{v} = a \vec{x} + b \vec{y}
$$

holds for any **orthonormal basis**, not necessarily the standard basis (which turns out to be just a special case once we have proven the claim). 

We require $\sqrt{a^2 + b^2} = 1$ to ensure that $\vec{v}$ has unit length. This condition is immediately satisfied by chosing $a=\cos \Theta, b = \sin \Theta$, as derived in the following proof.

### Expressing the linear combination with cosine and sine

Let $\vec{x}, \vec{y} \in \mathbb{R}^2$, $\vec{x} \cdot \vec{y} = 0$, $|\vec{x}| = |\vec{y}| = 1$, $a, b \in \mathbb{R}_{[0, 1]}$, $a^2 + b ^2 = 1$.

**Claim**: The linear combination $a\vec{x} + b\vec{y}$ can be written as $\cos(\Theta)\vec{x} + \sin(\Theta)\vec{y}$ and yields a normalized vector $\vec{v}$:

$$
\hat{v} = \cos(\Theta)\vec{x} + \sin(\Theta)\vec{y}
$$


**Proof**:

We compute the dot products $\vec{v} \cdot \vec{x}$, $\vec{v} \cdot \vec{y}$ to relate the cosines of the angles $\Theta$ (between $\vec{x}$ and $\vec{v}$) and $\varphi$ (between $\vec{y}$ and $\vec{v}$), respectively:

$$
\begin{alignat*}{3}
\vec{v} \cdot \vec{x} &= \cos(\Theta)  |\vec{v}| |\vec{x}| \\
\vec{v} \cdot \vec{y} &= \cos(\varphi) |\vec{v}| |\vec{y}|
\end{alignat*}
$$

Since $|\vec{x}| = |\vec{y}| = 1$, we find

$$
\begin{alignat*}{3}
\vec{v} \cdot \vec{x} &= \cos(\Theta)  |\vec{v}|\\
\vec{v} \cdot \vec{y} &= \cos(\varphi) |\vec{v}|
\end{alignat*}
$$

We now solve for $a$ and $b$. Since $\vec{v} = a\vec{x} + b \vec{y}$, we have

$$
\begin{split}
\vec{v} \cdot \vec{x} &= (a\vec{x} + b \vec{y}) \cdot \vec{x}  \\
                      &= a(|\vec{x}|^2)   + b( \vec{x} \cdot \vec{y}) \\
\end{split}
$$

Since $\vec{x} \cdot \vec{y} = 0$ and $|\vec{x}| = 1$, we have

$$
\begin{split}
\vec{v} \cdot \vec{x} = a \\
\end{split}
$$

Solving analogously for $b$, we obtain

$$
\begin{split}
\vec{v} \cdot \vec{y} = b \\
\end{split}
$$

We have shown that

$$
\begin{alignat*}{3}
\vec{v} \cdot \vec{x} &= \cos(\Theta)  |\vec{v}| &&= a\\
\vec{v} \cdot \vec{y} &= \cos(\varphi) |\vec{v}| && = b
\end{alignat*}
$$

and substitute into the linear combination:

$$
\begin{alignat*}{3}
\vec{v} &= a \vec{x} + b \vec{y} \\
        &= \cos(\Theta)  |\vec{v}| \vec{x} + \cos(\varphi) |\vec{v}| \vec{y}
\end{alignat*}
$$

From $\angle(\vec{x}, \vec{y}) = \frac{\pi}{2}$ we can derive

$$
\begin{equation}\notag
\begin{split}
\cos(\varphi) &= \cos(\frac{\pi}{2} - \Theta) \\
              &= \cos(\frac{\pi}{2})\cos(\Theta) + \sin(\frac{\pi}{2})\sin(\Theta)\\
              &= \sin(\Theta)
\end{split}
\end{equation}
$$



and finally rewrite the linear combination as

$$
\vec{v} = \cos(\Theta)  |\vec{v}| \vec{x} + \sin(\Theta) |\vec{v}| \vec{y}
$$

Dividing by $|\vec{v}|$ yields the normalized vector $\hat{v}$. We therefore receive


$$
\frac{\vec{v}}{|\vec{v}|} = \hat{v} = \cos(\Theta) \vec{x} + \sin(\Theta) \vec{y}
$$

$\Box$

#### Verifying the normalization
Under the given assumptions, we verify that $|\hat{v}| = 1$, confirming that $\hat{v}$ is normalized:

$$
\begin{equation}\notag
\begin{split}
|\hat{v}| &= |a \vec{x} + b \vec{y}| \\
          &= |a (x_1, x_2)^T + b (y_1, y_2)^T| \\
          &=  \sqrt{(ax_1 + by_1)^2 + (ax_2 + by_2)^2} \\
          &=  \sqrt{a^2x_1^2 + a^2x_2^2 + b^2y_1^2  + b^2y_2^2 + 2abx_1y_1 + 2abx_2y_2 } \\
          &=  \sqrt{a^2(x_1^2 + x_2^2) + b^2(y_1^2 + y_2^2) + 2ab(x_1y_1 + x_2y_2)} \\
          &=  \sqrt{a^2(\vec{x} \cdot \vec{x} ) + b^2(\vec{y} \cdot \vec{y}) + 2ab(\vec{x} \cdot \vec{y})} \\
          &=  \sqrt{a^2 + b^2 + 2ab0} \\
          &=  \sqrt{a^2 + b^2}
\end{split}
\end{equation}
$$

In order for $|\hat{v}| = 1$ to hold, it is required that $a^2 + b^2 = 1$, as given by the assumption.

Substituting $a$ and $b$ by $\cos(\Theta)$ and $\sin(\Theta)$, respectively, we confirm that

$$
\cos^2(\Theta) + \sin^2(\Theta) = 1
$$
$\Box$

### Determining the angle θ between the vectors

**Claim**: $\Theta$ is the angle between $\hat{v}, \vec{x}$.

This follows trivially since we have already shown that both $\hat{v}$ and $\vec{x}$ are unit vectors.
By definition of the dot product, we have:

$$
\begin{alignat*}{3}
\hat{v} \cdot \vec{x} &= \cos(\Theta) |\hat{v}| |\vec{x}| \\
                      &= \cos(\Theta)
\end{alignat*}
$$
which is illustrated in [Figure {figures.sinecosine}](#fig:sinecosine).

$\Box$


### Generalization to arbitrary lengths


One particular result we get from this - and which will be useful when applying rotations in $\mathbb{R}^3$ around arbitrary axes -  is the fact that, for any perpendicular vectors $\vec{x}, \vec{y} \in \mathbb{R}^2$, where $|\vec{x}| = |\vec{y}|$, the linear combination

$$
\vec{v} = \cos(\Theta) \vec{x} + \sin(\Theta) \vec{y}
$$

yields a vector $\vec{v}$ satisfying 

$$ 
|\vec{v}| = |\vec{x}| = |\vec{y}|
$$

Following the previous proof, we now treat $\vec{x}, \vec{y}$ as vectors with arbitrary, but **equal length**, resulting in the (normalized) linear combination

$$
\hat{v} = \cos(\Theta) \frac{\vec{x}}{|\vec{x}|} + \sin(\Theta)\frac{\vec{y}}{|\vec{y}|}
$$

To cancel out the denominators on the right-hand side, we multiply the equation by $|\vec{x}|$[^denominator], yielding

$$
\hat{v}|\vec{x}| = \cos(\Theta) \vec{x} + \sin(\Theta) \vec{y}
$$

Thus, we obtain a vector with the same magnitude as $\vec{x}$ and $\vec{y}$.  $\Box$

[^denominator]: Since $|\vec{x}| = |\vec{y}|$, we can also chose $|\vec{y}|$  

## Rotation around arbitrary points

When rotating a point by a given angle, the transformation depends on the chosen center of rotation.

<Figure idx={figures.rotation_origin} /> illustrates the point $p = (6, 4)$ rotated by $\Theta = 20 \degree$.
Here, $p$ is rotated around the origin $(0, 0)$ of the coordinate plane, resulting in $p'$, which can be obtained via the matrix-vector product

$$
\boldsymbol{R}(\Theta) \cdot \vec{p} = \vec{p'}
$$

where[^excursus]

$$
\boldsymbol{R}(\Theta) = \begin{pmatrix}
\cos \Theta & -\sin \Theta \\
\sin \Theta & \cos \Theta
\end{pmatrix}
$$

<Embed
    modeAware={true}
    figref={figures.rotation_origin}
    title={"The point p is rotated around the origin by θ degree, yielding p'."}>
    <img src={rotation_origin}  />
</Embed>
<details>
<summary>Plot-Code (Python)</summary>

<CodeBlock language="python">
  {rotation_origin_code}
</CodeBlock>
</details>


#### Choosing a different center of rotation
The rotation around $r$ is illustrated in <Figure idx={figures.rotation_point} />. 
$\vec{p'}$ is computed such that
 - the rotation center $r$ becomes the origin of all points in the coordinate plane
 - rotation is applied 
 - the rotated point is translated back.

Using $\vec{r} = r^T$, we get the expression:

$$
\boldsymbol{R}(\Theta) (\vec{p} - \vec{r}) + \vec{r}
$$

<Embed
modeAware={true}
figref={figures.rotation_code}
title={"The point p gets translated, then rotated around the origin, then translated back to p'."}>
<img src={rotation_point}  />
</Embed>
<details>
<summary>Plot-Code (Python)</summary>

<CodeBlock language="python">
  {rotation_origin_code}
</CodeBlock>
</details>

### Constructing an orthogonal basis for linear combination
As an alternative to explicitely translating a point to the origin, applying rotation and translating it back, we can directly construct an orthogonal basis around $\vec{rp}$ and express the rotated point as a linear combination, as [shown previously](#expressing-the-linear-combination-with-cosine-and-sine):

$$
\vec{p'} = \cos(\Theta) \vec{rp} + \sin(\Theta) \vec{rp}_{\perp} 
$$

Here, $\vec{rp}_{\perp}$ is the vector perpendicular to $\vec{rp}$ with the same magnitude, i.e. $|\vec{rp}_{\perp}| = |\vec{rp}|$.

To obtain $\vec{rp}_{\perp}$, we present two pratical methods:

1. Using the **vector cross product**:<br />
    The vector cross product $\vec{w} \times \vec{rp}$ yields a vector $\vec{rp}_{\perp}$ orthogonal to both $\vec{rp}$ and $\vec{w}$.

    $\vec{w}$ is unknown and therefor has to be computed.

    Since the vector cross product is an operation inherently defined in $\mathbb{R}^3$,  we need to temporarily extend our vector by a third component: For $\vec{rp}$, we write $(\vec{rp}_x, \vec{rp}_y, 0)$.

    For $\vec{w}$, we choose a unit vector along the $z$-axis, $(0, 0 , 1)^T$, which is perpendicular to our 2-dimensional plane.
    We then calculate

   $$
   \vec{rp}_{\perp} = \begin{pmatrix}0 \\ 0 \\ 1\end{pmatrix} \times \begin{pmatrix}\vec{rp}_x \\ \vec{rp}_y \\ 0\end{pmatrix} = \begin{pmatrix} - \vec{rp}_y \\ \vec{rp}_x \\ 0\end{pmatrix}
   $$
    Dropping the third component in the resulting vector, we end up with $\vec{rp}_{\perp} = (- \vec{rp}_y, \vec{rp}_x)^T$, which is perpendicular to $\vec{rp}$, as verified by their dot product:

   $$
   (- \vec{rp}_y, \vec{rp}_x)^T \cdot (\vec{rp}_x, \vec{rp}_y)^T = -\vec{rp}_y \vec{rp}_x + \vec{rp}_x \vec{rp}_y = 0
   $$

    In fact, the resulting vector $\vec{rp}_{\perp}$ is simply $\vec{rp}$ rotated by $90\degree$ **counterclockwise**, which will be formally verified with the next method.

2. Using the **rotation matrix**:<br />
    By substituting $\Theta = \frac{\pi}{2}$ ($90\degree$) into the rotation matrix $\boldsymbol{R}(\Theta)$, we get:
        
    $$
        \boldsymbol{R}(\frac{\pi}{2}) = \begin{pmatrix}\cos \frac{\pi}{2} & -sin \frac{\pi}{2} \\ \sin \frac{\pi}{2} & \cos \frac{\pi}{2} \end{pmatrix} = \begin{pmatrix}0 & -1 \\ 1 & 0 \end{pmatrix}
    $$
    
    Multiplying $\boldsymbol{R}(\frac{\pi}{2})$ with $\vec{rp}$, we obtain the perpendicular vector:

   $$
   \boldsymbol{R}(\frac{\pi}{2}) \vec{rp} = \begin{pmatrix}0 & -1 \\ 1 & 0 \end{pmatrix} \begin{pmatrix} \vec{rp}_x \\ \vec{rp}_y  \end{pmatrix} = \begin{pmatrix} -\vec{rp}_y \\ \vec{rp}_x  \end{pmatrix} =  \vec{rp}_{\perp}
   $$
        
    which also confirms the claim above: $\vec{rp}_{\perp}$ represents $\vec{rp}$ rotated by $90\degree$ **ccw**.

In both cases, $\vec{rp}_\perp$ can be used for finalizing the linear combination as

$$
\vec{p'} = \cos(\Theta) \vec{rp} + \sin(\Theta) \vec{rp}_{\perp}
$$
$\Box$

Without delving into the complexity of the involved operations, it should be evident that translating, rotating by $\boldsymbol{R}(\Theta)$, then translating back is more efficient when operating on a large number of vectors, as it avoids computing an orthogonal basis for each case. However, constructing such a basis becomes necessary when rotations around arbitrary axes must be performed, a topic we will address in the next section.


[^excursus]: See [Excursus: Constructing a second vector at a specific angle to an existing vector](/docs/articles/computer-graphics/dot-product#excursus-constructing-a-second-vector-at-a-specific-angle-to-an-existing-vector)

## 3D Rotation about an Arbitrary Axis 

Rotation of vectors about an arbitrary vector $\vec{n} \in \mathbb{R}^3$ in _three dimensions_ involves a combination of **vector projection** and using a locally defined two-dimensional orthogonal basis. The general method for computing such rotations is also known as the **Rodrigues Formula**[^rodrigues]:

$$
 \vec{v'} = (\vec{v} \cdot \vec{n}) \cdot \vec{v} + \cos(\Theta) (\vec{v} - ((\vec{v} \cdot \vec{n}) \cdot \vec{v})) + \sin\Theta (\vec{v} \cdot \vec{n})
$$

We will now proceed to derive the formula.

In <Figure idx={figures.rodrigues} />, the vector $\vec{v}$ is rotated about the axis $\vec{n}$. 
Since we do not care about the magnitude of $\vec{n}$, but rather it's direction, we normalize the vector and obtain $\hat{n}$, which will be the **center of rotation** for $\vec{v}$ in the following derivation.

Clearly, rotating one vector about another vector in 3D must preserve at least one component of the vector that never changes, specifically the one aligned with the axis of rotation (see <Figure idx={figures.axis_rotation} />).
To illustrate this, consider the special case of rotation about one of the standard basis vectors in $\mathbb{R}^3$:

$$
\vec{x} = \begin{pmatrix}1 \\ 0 \\ 0\end{pmatrix}, 
\vec{y} = \begin{pmatrix}0 \\ 1 \\ 0\end{pmatrix}, 
\vec{z} = \begin{pmatrix}0 \\ 0 \\ 1\end{pmatrix}
$$

For example, rotation of a point $(x, y)$ in the Euclidean plane corresponds to rotating the point  $(x, y, s)$ in three-dimensional space about the $z$-axis: Here, the $z$-component $s$ always stays unchanged, e.g. 

$$
\boldsymbol{R}_z(\Theta) \begin{pmatrix}x\\ y\\ s\end{pmatrix} = \begin{pmatrix}x'\\ y'\\ s\end{pmatrix}
$$
Analogous reasoning applies to rotation about the $x$-axis and $y$-axis, where the respective components remain constant.

Applying the rules of vector projection in an orthonormal basis - or an orthogonal basis with equal axis-length, as we will see shortly - helps us identify the components of a vector that remain unchanged under rotation. 
Illustrated in <Figure idx={figures.vector_projection} /> is the projection of a vector $\vec{a}$ onto another vector $\vec{b}$.
    
$$
\vec{a}_{\parallel} = \frac{\vec{a} \cdot \vec{b}}{|\vec{b}|^2} \cdot \vec{b}
$$

Here, $\vec{a}_{\parallel}$ represents the $x$-component of vector $\vec{a}$ in the direction of $\vec{b}$, while the **orthogonal** (or "sifted out") $y$-component is given by $\vec{a}_{\perp}$:

$$
\vec{a}_{\perp} = \vec{a} - \vec{a}_{\parallel}
$$

:::note
It might at first seem confusing that both the orthogonal and the parallel projections change under rotation in two dimensions, whereas we previously stated that the projection parallel to the rotation axis remains constant. This raises the question: Where is the rotation axis located in the Euclidean space?

This apparent discrepancy resolves once we explicitly construct the rotation axis **outside the plane**, effectively embedding the plane into a higher dimensional-space.

As demonstrated above, a 2D rotation can be represented in 3D by considering vectors lying in an $xy$-plane, perpendicular to the $z$-axis. 
Here, the _parallel projection_ of any rotated vector onto the rotation axis will be $\vec{0}$ - which corresponds exactly to the situation in two-dimensional rotation. 

However, once we _tilt_ the plane slightly, such that vectors take the form $(x, y, s)^T$ with $(x, y, s)^T \cdot (0, 0 , 1)^T \neq 0$, the parallel projections of these vectors become nonzero and remain fixed under rotation (see <Figure idx={figures.rotation_discrepancy}/>).

Informally speaking, the fixed projection of a rotated vector in two dimensions is not absent, its just that it's not "visible" within the plane of rotation.
:::

With the given explanation, we can conclude:

 - $\vec{v}_{\parallel}$ is the **parallel projection** of $\vec{v}$ onto the **normalized** rotation axis $\vec{n}$. $\vec{v}_{\parallel}$ can be computed via
    $$
       \vec{v}_{\parallel} = (\vec{v} \cdot \hat{n}) \cdot \hat{n}
    $$
 - $\vec{v}_{\perp}$ is the orthogonal projection of $\vec{v}$ onto the plane perpendicular to $\hat{n}$. $\vec{v}_{\perp}$ is obtained by computing
   $$
   \vec{v}_{\perp} = \vec{v} - \vec{v}_{\parallel}
   $$
 - While the parallel projection of $\vec{v}$ stays fixed under rotation, the vector represented by the orthogonal projection changes.
   It can be expressed by the linear combination
   $$
   \vec{v}'_{\perp} = \cos(\Theta)\vec{v}_{\perp} + \sin(\Theta)\vec{w}
   $$
   Here, the locally defined two-dimensional orthogonal basis is given by $\vec{v}_{\perp}$ and the vector $\vec{w}$. For the linear combination to satisfy the condition that the resulting vector $\vec{v}'_{\perp}$ has the same length as $\vec{v}_{\perp}$, the vector $\vec{w}$ must have the same magnitude as $\vec{v}_{\perp}$ and represent $\vec{v}_{\perp}$ rotated by $90^\circ$ **counterclockwise**. 
   The existence of such a vector was shown in the [previous section](#generalization-to-arbitrary-lengths). We can obtain the orthogonal basis by computing $\vec{w}$ via
   $$
   \vec{w} = \hat{n} \times \vec{v}_{\perp}
   $$
    Since $|\hat{n}| = 1$ and $\angle{ \hat{n}, \vec{v}_{\perp}} = \frac{\pi}{2}$, the length of $\vec{w}$ is verified with the **vector cross product**

   $$
   |\vec{w}| = |\hat{n} \times \vec{v}_{\perp}|= \sin(\frac{\pi}{2}) \cdot |\hat{n}| \cdot |\vec{v}_{\perp}| = |\vec{v}_{\perp}|
   $$

[^rodrigues]: Rodrigues, O. (1840). *Des lois géométriques qui régissent les déplacements d'un système solide dans l'espace, et de la variation des coordonnées provenant de ces déplacements considérés indépendamment des causes qui peuvent les produire*. *Journal de Mathématiques Pures et Appliquées*, 5, 380–440. http://eudml.org/doc/234443. <br />
_Friedberg, R. (2022)_ provides a translation, commentary and additional proofs in his paper   *Rodrigues, Olinde: "Des lois géométriques qui régissent les déplacements d'un système solide...", translation and commentary*. https://arxiv.org/abs/2211.07787.

------------------------