<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-articles/php-default-time-zones-and-dst/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">PHP, default time zones and DST | thorsten.suckow-homberg.de</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://thorsten.suckow-homberg.de/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://thorsten.suckow-homberg.de/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://thorsten.suckow-homberg.de/docs/articles/php-default-time-zones-and-dst/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="PHP, default time zones and DST | thorsten.suckow-homberg.de"><meta data-rh="true" name="description" content="Preparing your PHP Application to support different time zones"><meta data-rh="true" property="og:description" content="Preparing your PHP Application to support different time zones"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://thorsten.suckow-homberg.de/docs/articles/php-default-time-zones-and-dst/"><link data-rh="true" rel="alternate" href="https://thorsten.suckow-homberg.de/docs/articles/php-default-time-zones-and-dst/" hreflang="en"><link data-rh="true" rel="alternate" href="https://thorsten.suckow-homberg.de/docs/articles/php-default-time-zones-and-dst/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://YP7SUYRV93-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="thorsten.suckow-homberg.de RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="thorsten.suckow-homberg.de Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="thorsten.suckow-homberg.de" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.9c509722.css">
<link rel="preload" href="/assets/js/runtime~main.6b4db1e7.js" as="script">
<link rel="preload" href="/assets/js/main.91dacbac.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/home.svg" alt="Home" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/home.svg" alt="Home" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/articles/">Articles</a><a class="navbar__item navbar__link" href="/docs/toolbox">Toolbox</a><a class="navbar__item navbar__link" href="/projects">Projects</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/about">About</a><a href="https://github.com/thorstensuckow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/articles/">Articles</a><button aria-label="Toggle the collapsible sidebar category &#x27;Articles&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/software-craftsmanship/">On Software Craftsmanship</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/getter-setter-automation-with-php-attributes/">Accessor Automation with PHP Attributes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/docs/articles/agp-the-payroll-system/introduction">The Payroll System</a><button aria-label="Toggle the collapsible sidebar category &#x27;The Payroll System&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/agp-the-payroll-system/Use-Case-1-Adding-a-new-employee">Use Case 1 - Adding a new employee</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/dependency-injection-in-javascript/">Dependency Injection in JavaScript</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/sencha-extjs-beyond-es5/">Ext JS - Beyond ES5</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/using-php-enums-as-method-calls/">Using PHP enums as method calls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/downloadable-assets-with-github-actions/">Downloadable Assets with GitHub Actions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/docs/articles/creating-extjs-applications-with-coon-js/">Creating ExtJS applications with coon.js</a><button aria-label="Toggle the collapsible sidebar category &#x27;Creating ExtJS applications with coon.js&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/creating-extjs-applications-with-coon-js/introduction">Part 1: Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/creating-extjs-applications-with-coon-js/packages-and-configuration-options">Part 2: Packages and Configuration Options</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/creating-extjs-applications-with-coon-js/configuration-details-and-plugins">Part 3: Configuration Details and defining Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/creating-extjs-applications-with-coon-js/registering-services-and-using-the-service-locator">Part 4: Registering services and using the Service Locator</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/javascript-promises-return-values-and-error-handlers/">JavaScript Promises — Return Values and Error Handlers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/a-fluent-interface-for-javascript-promises/">Fluent Interface for JavaScript Promises</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/articles/php-default-time-zones-and-dst/">PHP, default time zones and DST</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/articles/"><span itemprop="name">Articles</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">PHP, default time zones and DST</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>PHP, default time zones and DST</h1></header><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>This article originally appeared on the <a href="https://web.archive.org/web/20120731100935/http://thorsten.suckow-homberg.de/2011/11/17/zend_date-default-timezones-and-dst/" target="_blank" rel="noopener noreferrer">17th of November, 2011</a> on my <a href="https://thorsten.suckow-homberg.de" target="_blank" rel="noopener noreferrer">personal website</a> under the title “Zend_Date, default time zones and DST” and was later translated to german and published in the <a href="https://entwickler.de/php/mittag-in-san-francisco-abend-in-london" target="_blank" rel="noopener noreferrer">PHP Magazin</a>. Some frameworks I’m mentioning in this article are outdated. The challenge to properly calculating dates for an international operating web-application still persist, though. The formatting of the original article was slightly changed for this website.</p></div></div><p>Is your application prepared to support different locales? Do you provide translations and different number formats based on a user’s regional conditions? If so, how about time and calendar dates? Do you keep track of the <a href="https://en.wikipedia.org/wiki/UTC_offset" target="_blank" rel="noopener noreferrer">UTC Offset</a> and the <a href="https://en.wikipedia.org/wiki/Daylight_saving_time" target="_blank" rel="noopener noreferrer">Daylight Saving Time (DST)</a> relative to the time zone your users live in, and are you able to convert dates properly to different time zones? This article will show you how to utilize <code>Zend_Date</code> to make your application aware of all this.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="intended-audience--other-notes"><strong>Intended Audience &amp; other Notes</strong><a href="#intended-audience--other-notes" class="hash-link" aria-label="Direct link to intended-audience--other-notes" title="Direct link to intended-audience--other-notes">​</a></h3><ul><li><p>Are you working with PHP and Zend Framework, and share a hearty dislike for I18N? Then this article is for you.</p></li><li><p>This article was written for Zend Framework 1.11 and PHP &gt;= 5.2. Database examples are using MySQL.</p></li><li><p>Working with time-related functions may cause problems on systems where PHP supports only timestamps as unsigned 32-bit integers. Since this problems should’ve been fixed to a large degree with PHP 5.1.0, and the fact that even <code>Zend_Date</code> silently assumes that working with dates in the range of 1901 and 2038 using PHP internal functions will succeed, we are not paying too much attention to this.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="michael-tim-and-an-8-hour-offset">Michael, Tim and an 8 hour offset<a href="#michael-tim-and-an-8-hour-offset" class="hash-link" aria-label="Direct link to Michael, Tim and an 8 hour offset" title="Direct link to Michael, Tim and an 8 hour offset">​</a></h2><p>Why would you want to convert dates to different time zones once they have been persisted in the data storage? Let’s say you are a London based developer and one of your clients works with this software you’ve written, a tool for creating, managing and sharing documents. This company is about to expand globally, and you’re excited that they just ordered a few more licenses for their new office in San Francisco. Michael, the former head of the financial department and one of the core users of your document sharing tool, will be the company’s first long time employee heading to the US, and a week before he moves, he introduces Tim — his replacement for the London based office — to the functionality of your software.
“See”, Michael says, “once you have finished working with the document, you click the ‘share’ button and it will automatically end up in my inbox for pending reviews.” He leans back, crossing the arms behind his head. “It’s that easy!”
A few days later — Tim finally got his own user account set up by the company’s admin — Michael moves from London to San Francisco. Your application did its job really good over the past months, and everyone’s pleased with how smooth everything’s working, and how convenient it is to access and manage documents from any computer with a working internet connection<sup><a href="#_1_"><strong>[1]</strong></a></sup>.
What nobody recognized yet — your application stored Michael’s (and everyone else’s) documents along with the absolute date of the time zone of London (<a href="https://en.wikipedia.org/wiki/Greenwich_Mean_Time" target="_blank" rel="noopener noreferrer">GMT</a>, that is), and he now continues to use your software in San Francisco. And he’s pretty confused about the strange dates that confront him now while looking at his document workspace. “Bananas”, he thinks.
“This one draft here”, he takes a close look at the monitor while circling the mouse pointer over the document entry, “I know Tim created it and shared it with me last monday, but that was clearly not at 08:00 PM.”
He scratches his head. “I remember receiving this draft around noon, or was it the other day? I went home around 07:00 PM, there’s no way I could have received the draft later on. Something must be broken… Or am I stressed out?”
So what’s happening here? Well, he moved to the pacific time zone which relies upon<strong> <a href="https://en.wikipedia.org/wiki/Pacific_Time_Zone" target="_blank" rel="noopener noreferrer">Pacific Standard Time (PST)</a></strong>. And this time zone is exactly 8 hours behind the time zone he previously lived in (ignoring <strong><a href="https://en.wikipedia.org/wiki/Daylight_saving_time" target="_blank" rel="noopener noreferrer">Daylight Saving Time</a></strong> for now).
Clicking somewhat lost through your application in search for a reasonable explanation, he notices that the software does not consider him being in a different time zone. Furthermore: He doesn’t find any option that would let him select a different time zone other than the one he lived in — and obviously where the software was developed.
It’s definitely time for some improvements. We all want our software to be used across the globe, don’t we?</p><blockquote><p> To clarify things: Yes, Tim actually saved the draft at 08:00 PM, but according to GMT. Since London is 8 hours ahead of San Francisco, Michael must have received the draft somewhen around 12:00 noon PST — the time Tim actually sent the draft from London minus the 8 hour offset to PST.</p></blockquote><p>Confused? Don’t worry, <strong>Zend_Date</strong> is here to help. As part of the <strong>Zend Framework</strong>, <code>Zend_Date</code> allows for convenient access to operations related to calculations, formats and transformations of dates.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="preparing-your-application">Preparing your application<a href="#preparing-your-application" class="hash-link" aria-label="Direct link to Preparing your application" title="Direct link to Preparing your application">​</a></h2><p>It is really important for software to be aware of the time zone it is currently serving as soon as there are any calculations related to dates and times involved.
Wondering whether your software is affected by this problem? Are dates and times part of any entity in your software which need to be persisted? If you can answer this question with “Yes!” (or if your first thought was “ah, crap…”), then you have already given yourself the answer: To a certain degree, it is possible that your software messes with the users’ feelings as soon as the time zone changes — whether it’s the time zone of your PHP environment or the time zone a user lives in. The following will give you some food for thought for your next planning meeting<!-- -->[2]<!-- -->.</p><p><img loading="lazy" src="https://cdn-images-1.medium.com/max/2000/0*m3vEwD83MqgYKGG2.png" alt="Don’t forget: Pain grows exponentially to the time spent deferring important decisions." class="img_ev3q"></p><p>There are a few steps you should take into account when adding time zone support to your application, and all of them should be implemented in one or another way in your software:</p><ul><li><p>Make the time zone globally configurable</p></li><li><p>Provide a default time zone and let the user choose the timezone he currently lives in</p></li><li><p>Set the default time zone for further date calculations for each request</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-the-time-zone-globally-configurable">Make the time zone globally configurable<a href="#make-the-time-zone-globally-configurable" class="hash-link" aria-label="Direct link to Make the time zone globally configurable" title="Direct link to Make the time zone globally configurable">​</a></h3><p>The time zone setting should be globally configurable without even touching PHP’s or the system’s configuration. When working with Zend_Framework, this can easily be done by using <strong>Zend_Config</strong>, a powerful component which helps in parameterizing your software. There are a lot of good tutorials out there so I won’t dive too deep into how to set up an application with Zend_Config, and give you a simple example instead:</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">Configuration (ini-format) for a Zend_Framework application, defining the default time zone.</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[environment]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">; Specify the default time zone for the application here. For a list of</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">; timezones supported by PHP, see http://de.php.net/manual/en/timezones.php</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">date.timezone.default = Europe/Berlin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can access the configuration by simply loading the ini-File using Zend_Config_Ini, and then query the settings accordingly.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">Code snippet demonstrating how to load and read out an ini-configuration file using Zend_Config_Ini</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// load the configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$config</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Zend_Config_Ini</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;/path/to/config/file&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// read out the time zone setting</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$timezone</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$config</span><span class="token operator">-&gt;</span><span class="token property">environment</span><span class="token operator">-&gt;</span><span class="token property">date</span><span class="token operator">-&gt;</span><span class="token property">timezone</span><span class="token operator">-&gt;</span><span class="token property">default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Following this approach, we are now able to easily specify a default time zone value for our application that should later be used. This is our very first step to gain more independence from our server’s presets and escape the scourge of unwanted configuration locks.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="let-the-user-choose-a-time-zone">Let the user choose a time zone<a href="#let-the-user-choose-a-time-zone" class="hash-link" aria-label="Direct link to Let the user choose a time zone" title="Direct link to Let the user choose a time zone">​</a></h3><p>There are a lot of ways we can map a time zone to a user: We could bind this property to a user object which is available through the request lifetime for each and every signed in user, or we could create an individual settings-object, which — again — can be mapped 1:1 to a user.</p><p>“What about guests visiting the application”, you ask? Remember that we have set up a default time zone, right? You can use this value for each visitor, or you could guess the time zone, for example based on locale informations available through HTTP headers (Accept-Language), or by using Javascript to examine a few available client properties. Heck, you could even let a visitor choose a time zone and save this value to a cookie.</p><p>For a list of available and supported time zones in PHP, you can visit <a href="https://www.php.net/manual/en/timezones.php" target="_blank" rel="noopener noreferrer">http://de.php.net/manual/en/timezones.php</a>. But if you want to create a drop-down box with a set of all time zones to choose from, it would be best to create this list automatically by using PHP’s native <a href="https://www.php.net/manual/en/class.datetimezone.php" target="_blank" rel="noopener noreferrer">DateTimeZone</a> object, which is available for PHP &gt;= 5.2:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">Code snippet to list all time zones supported by PHP. (PHP &gt;= 5.2 required for DateTimeZone).</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$timezones</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name static-context">DateTimeZone</span><span class="token operator">::</span><span class="token function" style="color:rgb(80, 250, 123)">listIdentifiers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$len</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$timezones</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$len</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token operator">++</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$timezones</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">.</span><span class="token plain"> </span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;\n&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The remaining work shouldn’t be too much of a challenge — we provide a settings section in our application where the user can specify the desired time zone. It’s simple as that.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-up-the-time-zone-for-each-request">Set up the time zone for each request<a href="#set-up-the-time-zone-for-each-request" class="hash-link" aria-label="Direct link to Set up the time zone for each request" title="Direct link to Set up the time zone for each request">​</a></h3><p>We’re almost there — just one important step is missing: How do we tell which time zone the application should serve? Quite simple — put the application in a time zone context by applying best practices<sup><a href="#_3_"><strong>[3]</strong></a></sup>! And the best practice would be to call <a href="http://de.php.net/manual/en/function.date-default-timezone-set.php" target="_blank" rel="noopener noreferrer">date_default_timezone_set()</a> in your bootstrapper, with the value of either the default time zone — or, if available — the user’s manually chosen time zone or the one you tried to autodetect.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">Specify a default time zone with a request. Make sure the setting is valid during the whole request and doesn’t change unintentionally.</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// code to read out the users time zone from his settings,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// assuming that our user object provides a &quot;getTimezone()&quot; method</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$timezone</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$user</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">getTimezone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$result</span><span class="token plain">   </span><span class="token operator">=</span><span class="token plain"> @</span><span class="token function" style="color:rgb(80, 250, 123)">date_default_timezone_set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$timezone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We are using <code>@</code> in front of date_default_timezone_set() to suppress any Notice thrown by PHP in case the passed argument is invalid. It is up to you to add appropriate error behavior at this point.</p><p><strong>Q:</strong> <em>I don’t need to handle different time zones. I think I’m fine with adjusting the time zone in the </em>php.ini<em>, and reading it out accordingly, right?</em>
<strong>A:</strong> Sure, go ahead, but for portability reasons it&#x27;s best practice to set the default time zone manually. Once you&#x27;re moving your application to another server or the php.ini needs to be changed regarding date/time zone settings, you&#x27;ll be probably out of luck and need to implement this feature to a time when there is already a large amount of user generated dates/times spread like crazy in your data storage.</p><p><strong>Q:</strong> <em>I looked up the </em>date.timezone <em>setting in my</em> php.ini<em>, but it&#x27;s missing. So what timezone is my application running in if I do not set it manually?</em>
<strong>A:</strong> It largely depends on what framework/libraries you are using, but in the most cases the default time zone is read out by calling date_default_timezone_get() (even <code>Zend_Date</code> uses it). According to the <strong><a href="https://www.php.net/manual/en/function.date-default-timezone-get.php" target="_blank" rel="noopener noreferrer">PHP manual</a></strong>, the timezone is determined in the following order:</p><blockquote><ul><li>Reading the timezone set using the date_default_timezone_set() function (if any)</li><li>Prior to PHP 5.4.0 only: Reading the TZ environment variable (if non empty)</li><li>Reading the value of the date.timezone ini option (if set)</li><li>Prior to PHP 5.4.0 only: Querying the host operating system (if supported and allowed by the OS). This uses an algorithm that has to guess the timezone. This is by no means going to work correctly for every situation. A warning is shown when this stage is reached. Do not rely on it to be guessed correctly, and set date.timezone to the correct timezone instead. <br> <br>If none of the above succeed, date_default_timezone_get() will return a default timezone of UTC.</li></ul></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-0-meridian-for-your-data-storage">The 0 meridian for your data storage<a href="#the-0-meridian-for-your-data-storage" class="hash-link" aria-label="Direct link to The 0 meridian for your data storage" title="Direct link to The 0 meridian for your data storage">​</a></h2><p>We have just enhanced our application with support for serving different time zones, but how exactly would we want to store the dates/times in the underlying data storage of our application? By storing the data without any time offset<em>[4]</em>! We use <strong>UTC</strong>/<strong>GMT</strong> as the preferred time zone for all of our date values.</p><p>Looking at several dates marked with either GMT or UTC, users see no difference between them, so how do we distinguish them? And should we even care? Well, a fractional second difference exist between the two, but it is so small, that it won’t affect your everyday work<sup><a href="#_5_"><strong>[5]</strong></a></sup>. To be on the safe side: Use UTC when in doubt. It means almost the same as GMT and it’s kind of its modern successor. Atomic age and stuff, you know?</p><p>There are various steps involved in making sure we are putting the proper UTC date to our data storage — and to be able to serve this dates properly to different time zones:</p><ul><li><p>Choosing the MySQL data type for our dates</p></li><li><p>Converting user/system generated dates to UTC</p></li><li><p>Converting UTC dates back to a specific time zone</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="choosing-the-mysql-data-type-for-our-dates">Choosing the MySQL data type for our dates<a href="#choosing-the-mysql-data-type-for-our-dates" class="hash-link" aria-label="Direct link to Choosing the MySQL data type for our dates" title="Direct link to Choosing the MySQL data type for our dates">​</a></h3><p>Storing UTC dates in our data storage boosts the (locale) portability of our software. However, we have to think about how our dates will be stored. We will take a look at two common alternatives:</p><ul><li><p>Saving dates and times as Unix timestamps</p></li><li><p>Saving dates and times in a datetime field</p></li></ul><p>Both of them have advantages and disadvantages:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unix-timestamp">Unix Timestamp<a href="#unix-timestamp" class="hash-link" aria-label="Direct link to Unix Timestamp" title="Direct link to Unix Timestamp">​</a></h3><p>A Unix timestamp is an integer value which represents the elapsed seconds since <code>1970-01-01 00:00:00(GMT)</code>. This is the so called “Unix Epoch”. On 32-bit systems, the valid range of values reach from <code>1970-01-01 00:00:00 UTC</code> to <code>2038-01-19 03:14:07 UTC</code> (the upper limit denoted by the year 2038 is commonly referred to as the <a href="https://en.wikipedia.org/wiki/Year_2038_problem" target="_blank" rel="noopener noreferrer">Year 2038 problem</a>). The short range of 68 years which can be represented by unsigned 32-bit timestamps and the fact that you cannot use dates before 1970 (except for 64-bit systems where Unix timestamps are stored as signed 64-bit integers, or on most 32-bit systems where timestamps are stored as signed integers, supporting a range from <code>1901-12-13 20:45:54 UTC</code> to <code>2038-01-19 03:14:07 UTC</code>) narrows the use cases for timestamps somewhat down<sup><a href="#_6_"><strong>[6]</strong></a></sup>.</p><p>An operating system with support for signed 32-bit timestamps should be one of the prerequisites for our application in this case. Since PHP made date_default_timezone_set() available with version 5.1.0, and this version fixed some issues with supporting only unsigned integers on some 32-bit systems when working with timestamps, this is mandatory.</p><p>However, when dealing with “transient” dates, such as dates belonging to log entries or such, timestamps are proven to work. Oh, and it’s hard to figure out what date exactly a 4-byte long value represents without doing some good old math, don’t you think?<em>[7]</em></p><p>Unix timestamps are UTC dates. This means: They do not provide any offset to another timezone. You can simply add or subtract the needed offset in seconds from the timestamp<sup><a href="#_8_"><strong>[8]</strong></a></sup>. Et voilá — you have your localized date.</p><p>Working with PHP on a 64-bit OS and using its functions to generate Unix timestamps? Beware, as timestamp-related functions in MySQL are not (yet) taking advantage of the large range of dates 64-bit timestamps can represent. See <strong><a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html" target="_blank" rel="noopener noreferrer">the manual</a></strong> for more information. If you want to store 64-bit timestamps in a MySQL table, make sure you do choose the appropriate data type for the column and do not need to rely on any MySQL timestamp-related functions for generating or comparing the therein stored values.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="datetime-fields">datetime Fields<a href="#datetime-fields" class="hash-link" aria-label="Direct link to datetime Fields" title="Direct link to datetime Fields">​</a></h3><p>datetime fields in MySQL require dates to be in the format <code>YYYY-MM-dd HH:mm:ss</code> (example: <code>1999-05-03 20:15:00</code>) which makes it not only perfect readable, but also allows for complex date calculations by using MySQL’s built in functionality. The supported range for datetime values is <code>1000-01-01 00:00:00</code> to <code>9999-12-31 23:59:59</code>. This covers a wide range of dates<sup><a href="#_9_"><strong>[9]</strong></a></sup> and is perfect for storing UTC datetime values.</p><p>Read more about MySQL’s datetime <strong><a href="https://dev.mysql.com/doc/refman/8.0/en/datetime.html" target="_blank" rel="noopener noreferrer">here</a></strong>.</p><p>Beware of using MySQL’s date calculation-functions which rely upon timezone settings, such as <strong><a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_now" target="_blank" rel="noopener noreferrer">NOW()</a></strong>, as computed results will depend on the time zone settings of the host system the method gets called on. You will find more information about MySQL time zone settings <strong><a href="https://dev.mysql.com/doc/refman/8.0/en/time-zone-support.html" target="_blank" rel="noopener noreferrer">here</a></strong>.</p><p>For another point of view regarding Unix timestamps and datetime fields in MySQL databases, see <strong><a href="http://billauer.co.il/blog/2009/03/mysql-datetime-epoch-unix-time/" target="_blank" rel="noopener noreferrer">this post by Eli Billauer</a></strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="getting-that-utc-date-ready-for-mysql">Getting that UTC date ready for Mysql<a href="#getting-that-utc-date-ready-for-mysql" class="hash-link" aria-label="Direct link to Getting that UTC date ready for Mysql" title="Direct link to Getting that UTC date ready for Mysql">​</a></h3><p>Since we’ve decided to store only UTC dates in our database, we go now back to <code>Zend_Date</code> and take a look at how we convert any date string to UTC date.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">Converting a date of any time zone to a UTC date.</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// we assume that the variable $date holds the date we want to add in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// UTC to the data storage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// the following works with date formats that include time zone offsets,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// e.g. Fri, 19 Jan 2007 22:08:13 +0100 (CET)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// read out the currently used timezone</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$date</span><span class="token plain">    </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;Fri, 19 Jan 2007 22:08:13 +0100 (CET)&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$oldZone</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">date_default_timezone_get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// set the new timezone to UTC to give PHP a hint what `strtotime()` has to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">date_default_timezone_set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;UTC&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">assert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">date_default_timezone_get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;UTC&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// `strtotime()` is much more forgiving to date strings which</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// do not comply to the exact standard</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dvalue</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> @</span><span class="token function" style="color:rgb(80, 250, 123)">strtotime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// reset default timezone to previous value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">date_default_timezone_set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$oldZone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">assert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">date_default_timezone_get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$oldZone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// get back to Zend Date</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dateObject</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Zend_Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dateObject</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dvalue</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token constant boolean" style="color:rgb(189, 147, 249)">false</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$date</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dvalue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Zend_Date_Exception</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">// fall back to default date to have a value at last</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dateObject</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;1970-01-01 00:00:00&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dateObject</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">setTimezone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;UTC&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$result</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dateObject</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;YYYY-MM-dd HH:mm:ss&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">assert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$result</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;2007-01-19 21:08:13&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note our first call to <code>strtotime()</code>. This is a native PHP function which is much more forgiving than <code>Zend_Date</code> when it comes to parsing date strings which do not comply to international standards. However, <code>strtotime()</code> can fail, and if it does, we delegate the parsing of the date to Zend_Date. It does not use <code>strtotime()</code> itself, but instead tokenizes the passed string for gathering all the information it needs. It even uses the BC Math extension (if available), which comes quite handy in case <code>strtotime()</code> failed with a date which is out of bounds. We’ll get to that later.</p><blockquote><p><strong>Q:</strong> So if <code>strtotime()</code> does a better job when it comes to parsing malformed dates, why doesn&#x27;t <code>Zend_Date</code> use it? <br>
<strong>A:</strong> Remember what we&#x27;ve just learned about the limited range of dates you can represent with a timestamp? If you specify a date before 1901 or after 2038 in the above example, you&#x27;re most likely to fail on systems where PHP supports timestamps only as (signed) 32-bit integer. <strong>If your use case includes the option of handling dates prior to 1901 or after 2038, do not rely on</strong> <code>strtotime()</code> <strong>and use only </strong>Zend_Date<strong>!</strong> Although it uses <strong><a href="https://www.php.net/manual/en/function.mktime.php" target="_blank" rel="noopener noreferrer">mktime()</a></strong> itself as long as the year is in between 1901 and 2038, it is able to fall back to internal calculations as soon as this value is out of bounds. See also the answer to the next question.</p></blockquote><blockquote><p><strong>Q:</strong> I&#x27;ve read that <code>Zend_Date</code> <strong>works internally with timestamps</strong>. If the range of dates which timestamps can represent is limited, what kind of workaround does <code>Zend_Date</code> use itself? <br>
<strong>A:</strong> None. Well, at least not directly. On 32-bit systems, timestamps represented as signed 32-bit integers (which we assume to be the lowest common denominator for our target system), can work with dates ranging from 1901-12-13 to 2038-01-19 (+ a few hours). Zend Framework suggests to make the <strong>BC Math extension</strong> available to your PHP installation if you want to support dates which are outside of this range.<sup><a href="#_10_"><strong>[10]</strong></a></sup></p></blockquote><p>If parsing the date failed, we catch the exception and fall back to a default value of <code>1970-01-01 00:00:00</code>, but it’s up to you if you let the exception bubble up or replace the date with any value you want. It mainly depends on your use case and how sensitive your data is to wrong date values<sup><a href="#_11_"><strong>[11]</strong></a></sup>.
The last step is to put <code>Zend_Date</code> into the UTC timezone, and – based on that – convert the string to the format YYYY-MM-dd HH:mm:ss, which is the required format for MySQL datetime fields.
Let’s go back to <code>strtotime()</code> for a second. You should’ve noted that we temporarily set another timezone (UTC) so the internal date conversion knows what kind of output we expect.
This might confuse you at first, so let’s go through it in detail: Let’s assume we have the following date that needs to be converted to UTC: <code>Fri, 19 Jan 2007 22:08:13 +0100 (CET)</code>. The last part of the string includes the offset to the UTC time zone “<code>+0100 (CET)</code>” (means: CET is 1 hour ahead of UTC when no DST is available, otherwise it would be + 2 hrs), and the first part “<code>Fri, 19 Jan 2007 22:08:13</code>” is actually the local date that should be put into the UTC time zone and stored to the data storage. By telling <code>strtotime()</code> it should generate a Unix timestamp from that date and setting the default timezone to UTC, the offset is calculated against the local date. If, however, you’d set the default timezone to America/Los_Angeles, the offset to <code>UTC (-08:00)</code> for this time zone (PST) is computed against the UTC date of the local date.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>This following code snippet illustrates the interaction between default time zones and strtotime(). The comments explain how the calculation works. If you want to know more about this, follow <strong><a href="https://www.cl.cam.ac.uk/~mgk25/iso-time.html" target="_blank" rel="noopener noreferrer">this link</a></strong>.*</p></div></div><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// show which timezone our script runs in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">date_default_timezone_get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">.</span><span class="token plain"> </span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;\n&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// outputs the converted date, depending on the timezone initially set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token plain"> </span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;1: &quot;</span><span class="token operator">.</span><span class="token function" style="color:rgb(80, 250, 123)">date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;Y-m-d H:i:s&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">strtotime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;Fri, 19 Nov 2007 22:08:13 +0100 (CET)&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">.</span><span class="token plain"> </span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;\n&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// lets have a look at DST. Set the timezone to a value of which we know</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// that it uses DST</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">date_default_timezone_set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;Europe/Berlin&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">assert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">date_default_timezone_get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;Europe/Berlin&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// no DST from end of Okt to end of March in Europe/Berlin,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// so the following will output 2007-01-19 22:08:13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;Y-m-d H:i:s&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">strtotime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;Fri, 19 Jan 2007 22:08:13 +0100 (CET)&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">assert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;2007-01-19 22:08:13&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token plain"> </span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;2: </span><span class="token string double-quoted-string interpolation variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)"> \n&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// summertime, i.e. CEST in Europe/Berlin, for example during August</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// the following will output 2007-08-19 23:08:13, since the timezone is specified</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// as CET, but during August, DST is active, so 1 hour wil be added</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;Y-m-d H:i:s&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">strtotime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;Sun, 19 Aug 2007 22:08:13 +0100 (CET)&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">assert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;2007-08-19 23:08:13&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token plain"> </span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;3: </span><span class="token string double-quoted-string interpolation variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)"> \n&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// now specify CEST as a timezone - this tells that the date is in Central European</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Summer Time (2 hrs ahead of UTC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// the output will be 2007-08-19 22:08:13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;Y-m-d H:i:s&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">strtotime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;Sun, 19 Aug 2007 22:08:13 +0200 (CEST)&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">assert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;2007-08-19 22:08:13&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token plain"> </span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;4: </span><span class="token string double-quoted-string interpolation variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)"> \n&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// changing the timezone to UTC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">date_default_timezone_set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;UTC&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">assert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">date_default_timezone_get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;UTC&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// ouputs 2007-01-19 21:08:13, the date converted to UTC time zone</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;Y-m-d H:i:s&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">strtotime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;Fri, 19 Jan 2007 22:08:13 +0100 (CET)&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token plain"> </span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;5: </span><span class="token string double-quoted-string interpolation variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)"> \n&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">assert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;2007-01-19 21:08:13&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// changing the timezone to America/Los_Angeles</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">date_default_timezone_set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;America/Los_Angeles&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">assert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">date_default_timezone_get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;America/Los_Angeles&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// outputs 2007-01-19 13:08:13, the specified date in the time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// zone of Los Angeles (America)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// calculate UTC date:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// (Fri, 19 Jan 2007 22:08:13 - (+01:00)) =  Fri, 19 Jan 2007 21:08:13 +00:00 (UTC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// now substract 08:00 (PST is 8 hrs behind UTC) from the UTC date</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// (Fri, 19 Jan 2007 21:08:13 +00:00 (UTC)) - (08:00))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// == Fri, 19 Jan 2007 13:08:13 -08:00 (PST)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;Y-m-d H:i:s&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">strtotime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;Fri, 19 Jan 2007 22:08:13 +0100 (CET)&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token plain"> </span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;6:  </span><span class="token string double-quoted-string interpolation variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)"> \n&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">assert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;2007-01-19 13:08:13&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// test this the same way around:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">date_default_timezone_set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;Europe/Berlin&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">assert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">date_default_timezone_get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;Europe/Berlin&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// outputs 2007-01-19 22:08:13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;Y-m-d H:i:s&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">strtotime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;Fri, 19 Jan 2007 13:08:13 -08:00 (PST)&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token plain"> </span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;7: </span><span class="token string double-quoted-string interpolation variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token string double-quoted-string" style="color:rgb(255, 121, 198)"> \n&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">assert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$d</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;2007-01-19 22:08:13&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Output generated:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// [your timezone]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// 1: [date based on your time zone]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// 2: 2007-01-19 22:08:13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// 3: 2007-08-19 23:08:13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// 4: 2007-08-19 22:08:13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// 5: 2007-01-19 21:08:13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// 6: 2007-01-19 13:08:13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// 7: 2007-01-19 22:08:13</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Rule of thumb</strong>: local date - ((-/+)time offset) = UTC date</p><p>It’s quite easy once you get the hang of it. The most important part is to relate to UTC all the time, and simply take the offsets of other time zones into account during converting. By using the UTC timezone, you can safely and easily display them in other time zones.</p><blockquote><p><strong>Q:</strong> When specifying the input date — why are we neither <code>strtotime()</code> nor <code>Zend_Date</code> telling which timezone it belongs to?<br>
<strong>A:</strong> Because we want PHP/Zend do the heavy lifting for us. See, sometimes we deal with date strings that come from resources we do not control, such as dates in email headers <sup><a href="#_12_"><strong>[12]</strong></a></sup>. Parsing a date string by hand involves a lot of work which was (thankfully) already done by other programmers, and this functionality is given to us by strtotime()/Zend_Date. You can, however, do a syntax check beforehand and disallow parsing for any date that looks fishy, e.g. if no offset information can be found.</p></blockquote><blockquote><p><strong>Q:</strong> So what happens if there is no additional time zone information in the string I pass to <code>strtotime()</code> or <code>Zend_Date</code>?<br>
<strong>A:</strong> In this case, both functions will fall back to the default time zone previously set with <code>date_default_timezone_set()</code>.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="being-soft-and-flexible">Being soft and flexible<a href="#being-soft-and-flexible" class="hash-link" aria-label="Direct link to Being soft and flexible" title="Direct link to Being soft and flexible">​</a></h2><p>Now that you have prepared your application to store UTC dates in the format <code>YYYY-MM-dd HH:mm:ss</code>, you are able to display them properly based on the time zone you have specified by using <code>date_default_timezone_set()</code>. We return to <code>Zend_Date</code> now to convert UTC dates to the default time zone cosen by you or your application’s user, as mentioned above.</p><p>Let’s first have a look at an error-prone solution and see why this is not the right way to do it:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">How Zend_Date should not be used when converting datetime values to the application&#x27;s time zone</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//creating `Zend_Date` and pass our datetime value from the data storage to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// the constructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dateObject</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Zend_Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;2007-01-19 14:08:13&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$date</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;YYYY-MM-dd HH:mm:ss&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So why is this wrong? Well, first off we’re simply passing a string to <code>Zend_Date</code> which provides no further information about its time zone, and therefor its offset (remember our date string “<code>Fri, 19 Jan 2007 22:08:13 +0100 (CET)</code>“? The timezone and offset information at its end helps functions like <code>strtotime()</code> when they look for any additional information for which region in the world the date was created for). Thus, <code>Zend_Date</code> will fall back to the timezone it has detected when it internally queried the return value of <code>date_default_timezone_get()</code>, and uses this value for converting.</p><p>Secondly, we’re not specifying the target time zone the date should be converted to. Guess what? By echoing the return value of <code>Zend_date::get()</code> in this case, the converted value will be the same as the value we just passed to <code>Zend_Date::__construct()</code> (whereas getting the same value is not an error: This happens when an input date with zero offset is converted to a timezone which in turn does not have an offset itself<sup><a href="#_13_"><strong>[13]</strong></a></sup>).
Let’s have a look at another example:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">How Zend_Date should not be used when converting UTC datetime values to the application&#x27;s time zone</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//create `Zend_Date` and pass the datetime value to the constructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dateObject</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Zend_Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;2007-01-19 14:08:13&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// set the time zone</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dateObject</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">setTimezone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">date_timezone_default_get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dateObject</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;YYYY-mm-dd HH:ii:ss&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Well, we’re not doing anything different here, are we? We simply do a call to Zend_Date::setTimezone() to set the Zend_Date-object to the time zone it was already set to. It already checks the value of <code>date_timezone_default_get()</code> internally. Relax. Take a break. And then have a look at a working example.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">How to convert UTC datetime values to a specific time zone using Zend_Date</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// create `Zend_Date` object</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dateObject</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Zend_Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// put the Date_Object into the UTC time zone</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dateObject</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">setTimezone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;UTC&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// set the UTC date the date object must work with</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dateObject</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;2007-01-19 14:08:13&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// now, set the time zone of the object to the time zone our application runs in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dateObject</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">setTimezone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">date_default_timezone_get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// display the UTC date converted to our time zone</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$dateObject</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;YYYY-MM-dd HH:mm:ss&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Q:</strong> Can’t <code>Zend_Date</code> just guess which timezone the string belongs to? <br>
<strong>A:</strong> No, that won&#x27;t work, since there is no information about the time zone offset in a YYYY-MM-dd HH:mm:ss-formatted date string. We know that it&#x27;s a UTC date, but we have to forward this information to Zend_Date.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="wrapping-things-up">Wrapping things up<a href="#wrapping-things-up" class="hash-link" aria-label="Direct link to Wrapping things up" title="Direct link to Wrapping things up">​</a></h2><p>Adding time zone support to your PHP application isn’t too much of a hassle, and not only will the user benefit from it, but so do you by eliminating a potential source for errors.
There aren’t too many steps involved in adding time zone support, and it’s best done at a very early implementation cycle to spare you the problems that occur when persisted data has to be converted back to UTC if you do not know which time zones the dates originally belong to.</p><p>As mentioned earlier — if you need to make your code work on each and every (32-bit) OS where PHP is available and you need to consider those OSs where PHP only supports unsigned 32-bit timestamps, you need to check whether dates which get processed with PHP internal functions are in between 1970-01-01 and 2038-01-19. In this case, you have to use a different approach than the one this article is about, since <code>Zend_Date</code> assumes that your target system supports at least signed 32-bit integers when working time related functions (PHP supporting only timestamps as unsigned 32-bit timestamps is a known problem which has been fixed since 5.1.0).
An additional “soft” approach when deploying your application would be to require the availability of the BC Math extension, so <code>Zend_Date</code> can take advantage of it.
The best configuration for a PHP system that covers a large range of dates would be a 64-bit OS. Your webpage should be guaranteed to run even in the far away future.</p><p>Oh, and did I mention the Unit Tests you should write for your date manipulating functions to get started in the first place?
Happy PHPing!</p><hr><p><em>Remarks:</em></p><sup>[1]</sup> <a name="_1_"></a>They were specially excited about phone calls during the weekends when their division manager would ask them to check a document for them. Write once, run anywhere.<br><sup>[2]</sup> <a name="_2_"></a>You are an agilist, aren’t you?<br><sup>[3]</sup> <a name="_3_"></a>They are proven to work<br><sup>[4]</sup> <a name="_4_"></a>You remember that 8 hour offset from San Francisco — London that ended up in the data storage? You don’t want that!<br><sup>[5]</sup> <a name="_5_"></a>Should you be working for the [LHC](https://en.wikipedia.org/wiki/Large_Hadron_Collider), then the fractional second difference should definitely matter to you.<br><sup>[6]</sup> <a name="_6_"></a>Think about birthdates. Even Facebook’s userbase does not only exist of people like “awesomesauce_1988″ and the like<br><sup>[7]</sup> <a name="_7_"></a>Unless your first name is Sheldon and you tend to embrace your genius to the fullest<br><sup>[8]</sup> <a name="_8_"></a>Assuming you converted the date to a timestamp properly<br><sup>[9]</sup> <a name="_9_"></a>Watch out, PHP programmers working in history-related institutions!<br><sup>[10]</sup> <a name="_10_"></a>Take a look at Zend_Locale_Math to understand how `Zend_Date` utilizes BC Math<br><sup>[11]</sup> <a name="_11_"></a>Ever wondered how these emails from 1970 end up in your inbox?<br><sup>[12]</sup> <a name="_12_"></a>How many email clients do you know, and how many of them are **looking out** to push their own proprietary standard through?<br><sup>[13]</sup> <a name="_13_"></a>London Calling<br></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/thorstensuckow/thorsten.suckow-homberg.de/tree/main/docs/articles/php-default-time-zones-and-dst/index.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-03-15T21:21:58.000Z">Mar 15, 2024</time></b> by <b>Thorsten Suckow-Homberg</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/articles/a-fluent-interface-for-javascript-promises/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Fluent Interface for JavaScript Promises</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#intended-audience--other-notes" class="table-of-contents__link toc-highlight"><strong>Intended Audience &amp; other Notes</strong></a></li><li><a href="#michael-tim-and-an-8-hour-offset" class="table-of-contents__link toc-highlight">Michael, Tim and an 8 hour offset</a></li><li><a href="#preparing-your-application" class="table-of-contents__link toc-highlight">Preparing your application</a><ul><li><a href="#make-the-time-zone-globally-configurable" class="table-of-contents__link toc-highlight">Make the time zone globally configurable</a></li><li><a href="#let-the-user-choose-a-time-zone" class="table-of-contents__link toc-highlight">Let the user choose a time zone</a></li><li><a href="#set-up-the-time-zone-for-each-request" class="table-of-contents__link toc-highlight">Set up the time zone for each request</a></li></ul></li><li><a href="#the-0-meridian-for-your-data-storage" class="table-of-contents__link toc-highlight">The 0 meridian for your data storage</a><ul><li><a href="#choosing-the-mysql-data-type-for-our-dates" class="table-of-contents__link toc-highlight">Choosing the MySQL data type for our dates</a></li><li><a href="#unix-timestamp" class="table-of-contents__link toc-highlight">Unix Timestamp</a></li><li><a href="#datetime-fields" class="table-of-contents__link toc-highlight">datetime Fields</a></li><li><a href="#getting-that-utc-date-ready-for-mysql" class="table-of-contents__link toc-highlight">Getting that UTC date ready for Mysql</a></li></ul></li><li><a href="#being-soft-and-flexible" class="table-of-contents__link toc-highlight">Being soft and flexible</a></li><li><a href="#wrapping-things-up" class="table-of-contents__link toc-highlight">Wrapping things up</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">copyright © 2024 <a href="/imprint">Thorsten Suckow-Homberg</a>. Except where otherwise noted, the content on this page is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.6b4db1e7.js"></script>
<script src="/assets/js/main.91dacbac.js"></script>
</body>
</html>