"use strict";(self.webpackChunkthorsten_suckow_homberg_de=self.webpackChunkthorsten_suckow_homberg_de||[]).push([[9850],{1552:e=>{e.exports=JSON.parse('{"permalink":"/blog/2023/02/19/fix-missing-favicon-in-extjs","editUrl":"https://github.com/thorstensuckow/thorsten.suckow-homberg.de/tree/main/blog/2023-02-19-fix-missing-favicon-in-extjs/index.md","source":"@site/blog/2023-02-19-fix-missing-favicon-in-extjs/index.md","title":"Fix: Missing favicon.ico in Sencha ExtJS production builds","description":"Fix: Missing favicon.ico in Sencha ExtJS production builds","date":"2023-02-19T00:00:00.000Z","tags":[{"inline":true,"label":"javascript","permalink":"/blog/tags/javascript"},{"inline":true,"label":"sencha","permalink":"/blog/tags/sencha"},{"inline":true,"label":"extjs","permalink":"/blog/tags/extjs"}],"readingTime":2.05,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Fix: Missing favicon.ico in Sencha ExtJS production builds","tags":["javascript","sencha","extjs"],"enableComments":true},"unlisted":false,"prevItem":{"title":"bcc-header issues with Horde_Mime_Mail","permalink":"/blog/2023/03/20/horde-mail-ignores-bcc"},"nextItem":{"title":"Releasing conjoon V1.0","permalink":"/blog/Releasing-conjoon-V1.0"}}')},7049:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>o,toc:()=>l});var o=i(1552),s=i(4848),t=i(8453);const c={title:"Fix: Missing favicon.ico in Sencha ExtJS production builds",tags:["javascript","sencha","extjs"],enableComments:!0},a=void 0,r={authorsImageUrls:[]},l=[{value:"Fix: Missing favicon.ico in Sencha ExtJS production builds",id:"fix-missing-faviconico-in-sencha-extjs-production-builds",level:2},{value:"The issue",id:"the-issue",level:3},{value:"The fix",id:"the-fix",level:3}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"fix-missing-faviconico-in-sencha-extjs-production-builds",children:"Fix: Missing favicon.ico in Sencha ExtJS production builds"}),"\n",(0,s.jsx)(n.p,{children:"Fixing missing favicon.ico in Ext JS applications."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.em,{children:["The original issue is tracked here: ",(0,s.jsx)(n.a,{href:"https://github.com/conjoon/conjoon/issues/24",children:"https://github.com/conjoon/conjoon/issues/24"})]})}),"\n",(0,s.jsx)(n.h3,{id:"the-issue",children:"The issue"}),"\n",(0,s.jsxs)(n.p,{children:["I\u2019m not quite sure *when *and *why *it broke, but it looks like production builds of Sencha Ext JS applications do not contain any ",(0,s.jsx)(n.strong,{children:"favicon.ico"})," originally existing in the development build (",(0,s.jsx)(n.em,{children:"anymore"}),")."]}),"\n",(0,s.jsx)(n.p,{children:"While everything seems to be okay with development builds (that\u2019s easy, they refer to the development\u2019s root folder in most cases and do not copy and move files around like the production build does), deploying to production will show the default icon coming with your vendor\u2019s browser for any Sencha ExtJS application, at least when your environment is using the following package versions:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    webpack v4.39.3n/a\n    ext-webpack-plugin v7.6.0 \n    Ext JS v7.6.0.41 \n    Sencha Cmd v7.6.0.87\n``\n\nA call to\n\n```bash\n    $ cross-env webpack \n          --env.profile=desktop \n          --env.environment=production \n          --env.treeshake=yes \n          --env.cmdopts=--uses\n"})}),"\n",(0,s.jsx)(n.p,{children:"will produce the production build, but the production build will not contain the favicon.ico. Here\u2019s proof (\u2026 sort of):"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://cdn-images-1.medium.com/max/2000/1*XGxSX1p43oVtk3cif5mE2Q.png",alt:""})}),"\n",(0,s.jsx)(n.h3,{id:"the-fix",children:"The fix"}),"\n",(0,s.jsx)(n.p,{children:"I did not invest too much investigating the reason why this file is omitted. Instead, I added the copy-webpack-plugin to the project and made sure the the favicon is copied over when running npm run build."}),"\n",(0,s.jsx)(n.p,{children:"If you\u2019re reading this post, you most likely stumbled across the same issue. Here\u2019s how to fix it."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Add copy-webpack-plugin to your project"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["I\u2019m still sporting **webpack v4.39.3 **so I had to fall back to an older version of the plugin. I\u2019m using ",(0,s.jsx)(n.strong,{children:"copy-webpack-plugin@6.4.1"})," in this case:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"    $ npm i -D copy-webpack-plugin@6.4.1\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"Add a few more modules to your project\u2019s webpack.config.js"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Add the following two lines to the head of the file:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'    // ....\n    const CopyWebpackPlugin = require("copy-webpack-plugin");\n    const fs = require("fs");\n    //...\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Why fs? I couldn\u2019t find an easy way to access the application\u2019s name at this point of the build step through the variables available, so I\u2019m using fs to parse the project's app.json. The value of its name-property is then used for computing the destination folder for the ",(0,s.jsx)(n.em,{children:"copy"}),"-operation."]}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["Add the ",(0,s.jsx)(n.strong,{children:"copy-webpack-plugin"})," to the list of plugins in the script"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["You\u2019ll easily find the location that has to be edited when looking for the ",(0,s.jsx)(n.strong,{children:"@sencha/ext-webpack-plugin"}),"-configuration:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"    const plugins = [\n      new ExtWebpackPlugin({\n        // ...\n      }),\n      new CopyWebpackPlugin({\n        patterns: [{\n          from: path.resolve(__dirname, './favicon.ico'),\n          to: path.join(\n              __dirname,\n              \"build\",\n              environment,\n              JSON.parse(\n                fs.readFileSync(\n                  path.resolve(__dirname, './app.json')\n                )\n              ).name\n          )\n        }]\n      })\n    ]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Subsequent builds will now contain the ",(0,s.jsx)(n.strong,{children:"favicon.ico"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>a});var o=i(6540);const s={},t=o.createContext(s);function c(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);