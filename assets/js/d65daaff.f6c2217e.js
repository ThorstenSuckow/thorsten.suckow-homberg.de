(self.webpackChunkthorsten_suckow_homberg_de=self.webpackChunkthorsten_suckow_homberg_de||[]).push([[6832],{3905:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),m=r,h=u["".concat(l,".").concat(m)]||u[m]||d[m]||o;return n?a.createElement(h,i(i({ref:t},c),{},{components:n})):a.createElement(h,i({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2490:(e,t,n)=>{"use strict";n.d(t,{$o:()=>c,_b:()=>d,cx:()=>p,e2:()=>u,in:()=>h,t2:()=>m});var a=n(7294),r=n(5075),o=n(9943),i=n(814),s=n(4098),l=n.n(s);function p(e){let{width:t,children:n,title:o,figure:i,modeAware:s}=e;return a.createElement("div",{style:{width:t,textAlign:"center",margin:20}},a.createElement("div",{className:!1!==s?"umlImg":""},n),a.createElement("div",{style:{textAlign:"center"}},a.createElement("sup",null,a.createElement("b",null,r.Z.isString(i)?i:`Figure ${i??1}`)," ",a.createElement("span",{dangerouslySetInnerHTML:{__html:o}}))))}function c(e){let{id:t,source:n,title:r}=e;return a.createElement(p,{modeAware:!1,title:r,figure:`Source ${n}`},a.createElement(o.Z,{id:t}))}function u(e){let{url:t,figure:n,title:r}=e;return a.createElement(p,{modeAware:!1,figure:n,title:r},a.createElement("img",{alt:"{title}",src:t}))}function d(e){let{children:t,figure:n,title:r}=e;return a.createElement(p,{modeAware:!0,figure:n,title:r,children:t})}function m(e){let{when:t,where:n}=e;const[r,o]=n;return a.createElement("div",null,"This article was originally published in ",t," at ",a.createElement("a",{target:"_blank",href:o},r),". Some formatting might have get lost during the migration to this site: If you think you spotted an issue caused by malformed formatting, feel free to open a ",a.createElement("a",{href:"https://github.com/ThorstenSuckow/thorsten.suckow-homberg.de"},"Pull Request")," or ",a.createElement("a",{href:"mailto:thorsten@suckow-homberg.de"},"send me an Email"),".")}function h(e){let{url:t}=e;const[n,r]=a.useState("");return l()(t).then((e=>{e.text().then((e=>r(e)))})),a.createElement(i.Z,{language:"php"},n)}},7368:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var a=n(7462),r=(n(7294),n(3905)),o=n(2490);const i={title:"Ext JS - Beyond ES5",description:"Use latest ECMA Script versions with Sencha Ext JS"},s=void 0,l={unversionedId:"articles/sencha-extjs-beyond-es5/index",id:"articles/sencha-extjs-beyond-es5/index",title:"Ext JS - Beyond ES5",description:"Use latest ECMA Script versions with Sencha Ext JS",source:"@site/docs/articles/sencha-extjs-beyond-es5/index.mdx",sourceDirName:"articles/sencha-extjs-beyond-es5",slug:"/articles/sencha-extjs-beyond-es5/",permalink:"/docs/articles/sencha-extjs-beyond-es5/",draft:!1,editUrl:"https://github.com/thorstensuckow/thorsten.suckow-homberg.de/tree/main/docs/articles/sencha-extjs-beyond-es5/index.mdx",tags:[],version:"current",lastUpdatedBy:"Thorsten Suckow-Homberg",lastUpdatedAt:1706997528,formattedLastUpdatedAt:"Feb 3, 2024",frontMatter:{title:"Ext JS - Beyond ES5",description:"Use latest ECMA Script versions with Sencha Ext JS"},sidebar:"docs",previous:{title:"Dependency Injection in JavaScript",permalink:"/docs/articles/dependency-injection-in-javascript/"},next:{title:"Using PHP enums as method calls",permalink:"/docs/articles/using-php-enums-as-method-calls/"}},p={},c=[{value:"When things go AWOL",id:"when-things-go-awol",level:3},{value:"Introducing @coon-js/delorean",id:"introducing-coon-jsdelorean",level:2},{value:"CI/CD Integration",id:"cicd-integration",level:3},{value:"build.xml strategy",id:"buildxml-strategy",level:3},{value:"package.json strategy",id:"packagejson-strategy",level:3},{value:"Additional Resources",id:"additional-resources",level:2},{value:"Community Notes",id:"community-notes",level:3}],u={toc:c},d="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"info"},(0,r.kt)(o.t2,{when:"November 2022",where:["medium.com","https://medium.com/@thorstensuckow/sencha-ext-js-beyond-es5-a0382916b7a6"],mdxType:"MigrationNotice"})),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Using modern ECMAScript syntax with Sencha Ext JS projects")),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Sencha Ext JS ships with a closed source build tool that bundles the ",(0,r.kt)("a",{parentName:"em",href:"https://developers.google.com/closure/compiler"},"Closure Compiler"),"; in some cases, this prevents developers from using modern ECMAScript syntax. This article introduces ",(0,r.kt)("a",{parentName:"em",href:"https://github.com/coon-js/delorean"},"@coon-js/delorean"),", a tool that works around this issue with the help of an additional transpilation layer.")),(0,r.kt)("p",null,"One reason for frustration when working with ",(0,r.kt)("strong",{parentName:"p"},"Ext JS")," is the fact that modern JavaScript syntax cannot be used with the framework: As soon as ",(0,r.kt)("strong",{parentName:"p"},"Sencha CMD")," builds a package or application, code that was known to work in development or tests fails to compile for production, or even worse: it completely breaks during production."),(0,r.kt)("p",null,"Here are a few examples that are known to break a build with Sencha CMD:"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing"},"Nullish coalescing operator"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'    const foo = null ?? "default string";\n')),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment"},"Destructuring assignment syntax")," with function arguments:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"    const fn = ([x, y, z]) => ({x, y, z});\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"},"Optional chaining operator"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"    const adventurer = {\n      name: 'Alice',\n      cat: {\n        name: 'Dinah'\n      }\n    };\n    \n    const dogName = adventurer.dog?.name;\n")),(0,r.kt)("p",null,"The reason for this is that Sencha CMD is a proprietary tool that is shipped with a baked-in ",(0,r.kt)("a",{parentName:"p",href:"https://docs.sencha.com/cmd/7.6.0/guides/closure_compiler.html"},"Closure Compiler"),"; the way it\u2019s integrated prevents developers to fine tune build processes. The Closure Compiler obviously requires updates to work with current ECMAScript standards. There are a few configuration options for packages that allow for a more forgiving (read: ",(0,r.kt)("em",{parentName:"p"},"compatible"),") parsing and transpiling of source code. However, there is code that is known to fail during compiling, even if the code is syntactically correct."),(0,r.kt)("p",null,"(Refer to ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/google/closure-compiler/wiki/Supported-features"},"this list")," to get an idea of what\u2019s working with the Closure Compiler.)"),(0,r.kt)("p",null,"Also note that the latest available version of the Closure Compiler is not necessarily shipped with the latest available version of Sencha CMD: ",(0,r.kt)("em",{parentName:"p"},"v7.6.0.87")," of Sencha CMD ships with ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/google/closure-compiler/wiki/Releases#mar-3rd-2022-v20220301"},"v20220301"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"    @sencha\\cmd> dir /s/b | findstr .*closure.*$\n    \n    @sencha\\cmd\\dist\\lib\\closure-compiler-externs-v20220301.jar\n    @sencha\\cmd\\dist\\lib\\closure-compiler-v20220301.jar\n")),(0,r.kt)("p",null,"Unfortunately, Sencha provides no official guide for upgrading the Closure Compiler independently."),(0,r.kt)("h3",{id:"when-things-go-awol"},"When things go AWOL"),(0,r.kt)("p",null,"Here\u2019s an example that shows how production code of an Ext JS project breaks when modern ECMAScript is used. Consider the following lines as part of the development source code:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"    const fn = ([a, b, c]) => ({a, b, c});\n")),(0,r.kt)("p",null,"This arrow function"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"uses the ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment"},"destructuring assignment syntax")," to unpack the first three entries of an array argument")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"creates an object from the entries using the ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer#property_definitions"},"notation for shorthand property names"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"returns this object"))),(0,r.kt)("p",null,"Let the code be part of a Sencha Ext JS package that can be built with the command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"    $ npx @sencha/cmd package build\n")),(0,r.kt)("p",null,"The version used with Sencha CMD is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"    $ npx @sencha/cmd which\n    \n      Sencha Cmd v7.6.0.87\n")),(0,r.kt)("p",null,"And the configuration from the sencha section of the package.json is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'    "output": {\n        "base": "${package.dir}/build"\n    },\n    \n    "compressor": {\n        "type": "closure",\n        "polyfills": "none"\n    },\n')),(0,r.kt)("p",null,"Compiling fails since the output level is set to ES5 by default; it\u2019s an ",(0,r.kt)("a",{parentName:"p",href:"https://262.ecma-international.org/5.1/"},"older ES")," spec, but ",(0,r.kt)("a",{parentName:"p",href:"https://caniuse.com/es5"},"compatible with a wide range of browsers"),":"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/2722/1*c2_kyf0X7Qjnri980hbaTA.png",alt:null})),(0,r.kt)("p",null,"The configuration can be adjusted so that the ES version used with the project can be specified: Knowing that ",(0,r.kt)("em",{parentName:"p"},"NEXT "),"is the level for the latest features supported, the configuration is changed to:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'    "output": {\n          "base": "${package.dir}/build",\n          "js": {\n              "version": "NEXT"\n          }\n      },\n      "language": {\n          "js": {\n              "input": "NEXT",\n              "output": "NEXT"\n          }\n      },\n      "compressor": {\n          "type": "closure",\n          "polyfills": "none"\n      },\n')),(0,r.kt)("p",null,"The output on the console shows that ",(0,r.kt)("em",{parentName:"p"},"NEXT")," is understood, but still fails with compiling: The build files stay empty."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/2568/1*nJs0luhutbF9CX9tF0gCcQ.png",alt:null})),(0,r.kt)("p",null,"Apparently, somewhere, something is broken."),(0,r.kt)("p",null,"The language.js.input seems to be causing the issues. According to the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.sencha.com/cmd/7.6.0/guides/cli_reference.html#cli_reference_-_sencha_compile_concatenate"},"official Sencha docs"),", the following language levels are supported by the tool:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"    ES3  : ECMAScript 3 language level\n    ES5  : ECMAScript 5 language level\n    ES6  : ECMAScript 6 language level (2015)\n    ES7  : ECMAScript 7 language level (2016)\n    ES8  : ECMAScript 8 language level (2017)\n    NEXT : ECMAScript Next (or ES.Next) language level\n")),(0,r.kt)("p",null,"whereas the Closure Compiler ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/google/closure-compiler/wiki/Flags-and-Options"},"supports the following")," specs with language_in:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"    ECMASCRIPT3\n    ECMASCRIPT5\n    ECMASCRIPT5_STRICT\n    ECMASCRIPT_2015\n    ECMASCRIPT_2016\n    ECMASCRIPT_2017\n    ECMASCRIPT_2018\n    ECMASCRIPT_2019\n    ECMASCRIPT_2020\n    ECMASCRIPT_2021 \n    STABLE\n    ECMASCRIPT_NEXT (latest features supported) (default: STABLE)\n")),(0,r.kt)("p",null,"Unfortunately, an attempt at setting the language to any of the values supported directly by the Closure Compiler (or variations of it, such as ",(0,r.kt)("em",{parentName:"p"},"ECMASCRIPT_2021"),", ",(0,r.kt)("em",{parentName:"p"},"ES10"),"\u2026) results in the following error message:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/2000/1*q1P4eHdT5xLsI1NdHnpRxA.png",alt:null})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"ES8"))," seems to be the greatest common denominator for Sencha CMD and the Closure Compiler. The following configuration works \u2014 the build process does not cancel halfway through, and transpiled JavaScript ends up in the source files:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'    "output": {\n        "base": "${package.dir}/build",\n        "js": {\n            "version": "ES8"\n        }\n    },\n    "language": {\n        "js": {\n            "input": "ES8",\n            "output": "ES8"\n        }\n    },\n    "compressor": {\n        "type": "closure",\n        "polyfills": "none"\n    }\n')),(0,r.kt)("p",null,"However, loading the build in production fails."),(0,r.kt)("p",null,"Here\u2019s the original JavaScript again for reference:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"    const fn = ([a, b, c]) => ({a, b, c});\n")),(0,r.kt)("p",null,"\u2026 and the JavaScript source that ends up with the debug code (e.g., build/project-debug.js):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"    const fn = [a,b,c] => ({\n        a,\n        b,\n        c\n    });\n")),(0,r.kt)("p",null,"\u2026 and this is the code produced for the compressed JavaScript (e.g., build/project.js):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"    const c=()=>({a,b,c});\n")),(0,r.kt)("p",null,"It does not take long to see why the code fails: It is ",(0,r.kt)("strong",{parentName:"p"},"syntactically wrong")," in the debug build, and ",(0,r.kt)("strong",{parentName:"p"},"functionally wrong")," in the compressed build."),(0,r.kt)("h2",{id:"introducing-coon-jsdelorean"},"Introducing @coon-js/delorean"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/2892/1*Unu-G2xd9B0nKUyMKFRFoQ.png",alt:null})),(0,r.kt)("p",null,"Modern language features can be supported with the help of additional transpiling: Development sources using the latest syntax according to ES specifications need to get transpiled in advance, feeding the Closure Compiler with a JavaScript version it understands, resulting in correct and usable builds."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/coon-js/delorean"},"@coon-js/delorean")," is an npm tool that provides an additional transpilation layer on top of Sencha CMD with the help of ",(0,r.kt)("a",{parentName:"p",href:"https://babel.dev"},"Babel"),"."),(0,r.kt)("p",null,"For making this work, ",(0,r.kt)("strong",{parentName:"p"},"delorean")," alters the project file of the package or application and redirects source-roots to the files that were processed and transpiled by ",(0,r.kt)("strong",{parentName:"p"},"Babel"),". This allows for using any JavaScript language feature and ",(0,r.kt)("a",{parentName:"p",href:"https://moduscreate.com/blog/optimize-es6-output-size-performance-via-babel/"},"additional optimisations")," that can be injected with the help of Babel\u2019s countless number of plugins."),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://babeljs.io/docs/en/options#no-targets"},"default configuration of **delorean"),"** makes sure that Babel produces ES5 code:"),(0,r.kt)(o.e2,{url:"https://cdn-images-1.medium.com/max/3490/1*_dfF7nUTe6nzegu-xW4uwA.png",figure:1,title:"delorean interrupts the regular build process of Sencha CMD by providing pre-transpiled sources.",mdxType:"ImgEmbed"}),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"delorean")," hardly affects the actual build process: It only updates existing mappings in the configuration file required by Sencha CMD; these usually represent directories containing project-relevant source files. Besides obvious scaffolding of the transpiled project, the infrastructure of the project remains untouched, making almost ",(0,r.kt)("em",{parentName:"p"},"seamless integration")," into the development process and existing build pipelines possible."),(0,r.kt)(o.e2,{url:"https://cdn-images-1.medium.com/max/3222/1*sacj6snzJ9b_mU0BHbZAvw.png",figure:2,title:"npx delorean -p takes care of transpiling and updating the project configuration.",mdxType:"ImgEmbed"}),(0,r.kt)("p",null,"Changes made to the project configuration can easily be tracked:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-diff"},'             "classpath": [\n    -            "${package.dir}/src",\n    -            "${package.dir}/${toolkit.name}/src"\n    +            "${package.dir}/.deloreanbuild/src",\n    +            "${package.dir}/.deloreanbuild/${toolkit.name}/src"\n             ],\n             "overrides": [\n    -            "${package.dir}/overrides",\n    -            "${package.dir}/${toolkit.name}/overrides"\n    +            "${package.dir}/.deloreanbuild/overrides",\n    +            "${package.dir}/.deloreanbuild/${toolkit.name}/overrides"\n             ],\n')),(0,r.kt)("p",null,"During development, the changes made by ",(0,r.kt)("strong",{parentName:"p"},"delorean")," should be reverted so that live reloading with sencha app watch respective ",(0,r.kt)("a",{parentName:"p",href:"https://docs.sencha.com/extjs/7.6.0/guides/using_systems/using_npm/configuring_webpack.html"},(0,r.kt)("em",{parentName:"a"},"webpack ")),"(being part of Ext JS projects used with npm) still works \u2014 and of course so that the browser uses the sources from the files currently being edited by the developer. (Otherwise, the development environment would rely on the transpiled files that were created previously by ",(0,r.kt)("strong",{parentName:"p"},"delorean"),".)"),(0,r.kt)("p",null,"Reverting the changes is fairly easy, as a simple call to"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"   $ npx delorean -r\n")),(0,r.kt)("p",null,"removes any reference to the .deloreanbuild folder from the project configuration file:"),(0,r.kt)(o.e2,{url:"https://cdn-images-1.medium.com/max/2000/1*W7KxPQ_8vPSZNmpRiEKkMw.png",figure:3,title:"Reverting changes made by delorean once a build has finished.",mdxType:"ImgEmbed"}),(0,r.kt)("h3",{id:"cicd-integration"},"CI/CD Integration"),(0,r.kt)("p",null,"npx delorean -p and npx delorean -r are easily integrated with CI/CD pipelines commonly used with Sencha Ext JS projects.\nYou can automate transpilation by configuring either the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.sencha.com/cmd/guides/advanced_cmd/cmd_build.html"},"build.xml")," of a package or an application, or by adding additional ",(0,r.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/cli/v9/using-npm/scripts"},"scripts")," to the package.json ."),(0,r.kt)("h3",{id:"buildxml-strategy"},"build.xml strategy"),(0,r.kt)("p",null,"This xml-file is usually available with any Ext JS package or application and provides a place for adding options and hooks for the ",(0,r.kt)("a",{parentName:"p",href:"https://ant.apache.org/"},"Ant tool")," used with Sencha CMD. It allows for configuring -before-build /-after-build targets (",(0,r.kt)("a",{parentName:"p",href:"https://docs.sencha.com/cmd/guides/advanced_cmd/cmd_ant.html"},"you can read more about it **here"),"**)."),(0,r.kt)("p",null,"You can make use of ",(0,r.kt)("strong",{parentName:"p"},"delorean "),"by configuring the targets with:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'    <target name="-before-build">\n        <exec executable="cmd">\n            <arg line="/c npx delorean -p"/>\n        </exec>\n    </target>\n    \n    <target name="-after-build">\n        <exec executable="cmd">\n            <arg line="/c npx delorean -r"/>\n        </exec>\n    </target>\n')),(0,r.kt)("p",null,"This will run npx delorean -p before Sencha CMD builds the project (hence -before-build), and revert all project specific changes once the build completes by invoking npx delorean -r (hence -after-build)."),(0,r.kt)("h3",{id:"packagejson-strategy"},"package.json strategy"),(0,r.kt)("p",null,"If you already have a build script in your package.json which calls Sencha CMD, wrap the build command with additional calls to ",(0,r.kt)("strong",{parentName:"p"},"delorean"),". Here\u2019s an example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'    {\n      "scripts": [\n        "build": "npx delorean -p && npm run senchabuild && npx delorean -r",\n        "senchabuild": "npm run clean && cross-env webpack --env.profile=desktop --env.environment=production --env.treeshake=yes --env.cmdopts=--uses" \n      ]\n    }\n')),(0,r.kt)("h2",{id:"additional-resources"},"Additional Resources"),(0,r.kt)("p",null,"The repository for the project can be found a ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/coon-js/delorean"},"https://github.com/coon-js/delorean"),". Feedback regarding configurations, CI/CD integrations and issue reports is greatly appreciated."),(0,r.kt)("p",null,"The official documentation for delorean is available at ",(0,r.kt)("a",{parentName:"p",href:"https://www.conjoon.org/docs/api/misc/@coon-js/delorean"},"https://www.conjoon.org/docs/api/misc/@coon-js/delorean"),", which is also its project home, since it originated as part of the conjoon ecosystem."),(0,r.kt)("h3",{id:"community-notes"},"Community Notes"),(0,r.kt)("p",null,"In the ",(0,r.kt)("a",{parentName:"p",href:"https://discord.gg/TW896RE32W"},"Sencha Discord Server"),", users reacted to this article and noted that it would also be great to completely skip Sencha CMD and use tools like ",(0,r.kt)("a",{parentName:"p",href:"https://webpack.js.org/"},"**webpack"),(0,r.kt)("strong",{parentName:"p"}," or ["),"rollup](",(0,r.kt)("a",{parentName:"p",href:"https://rollupjs.org/guide/en/"},"https://rollupjs.org/guide/en/"),")** exclusively for building projects. I strongly agree and think that providing a solution for bundling assets and sources with the help of these tools can be done with manageable effort."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Significant Revisions")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"05 March 2023: Migrated article to ",(0,r.kt)("strong",{parentName:"p"},"this")," site")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"02 December 2022: Minor corrections in preparation for the german translation")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"30 November 2022: Updated ",(0,r.kt)("strong",{parentName:"p"},"Figure 2 "),"with externals configuration")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"23 November 2022: Updated wording, added community notes")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"21 November 2022: Published first installment"))))}m.isMDXComponent=!0},2480:()=>{}}]);