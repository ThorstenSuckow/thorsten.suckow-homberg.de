(self.webpackChunkthorsten_suckow_homberg_de=self.webpackChunkthorsten_suckow_homberg_de||[]).push([[710],{477:()=>{},2172:(e,t,n)=>{"use strict";n.d(t,{$z:()=>u,C9:()=>d,IX:()=>p,ZX:()=>m,eJ:()=>h,uR:()=>f});var s=n(6540),i=n(4882),r=n(8069),o=n(4945),a=n.n(o),c=n(2897),l=(n(3271),n(4848));function d(e){let{width:t,children:n,title:s,figure:r,figref:o,modeAware:a}=e;return(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,l.jsxs)("div",{style:{maxWidth:t,textAlign:"center",margin:20},children:[o&&(0,l.jsx)("a",{name:`fig_${o}`}),(0,l.jsx)("div",{className:!1!==a?"umlImg":"",children:n}),(0,l.jsx)("div",{style:{textAlign:"center"},children:(0,l.jsxs)("sup",{children:[(0,l.jsx)("b",{children:i.A.isString(r)?r:`Figure ${r??o??1}`})," ",(0,l.jsx)("span",{dangerouslySetInnerHTML:{__html:s}})]})})]})})}function h(e){let{id:t,source:n,title:s}=e;return(0,l.jsx)(d,{modeAware:!1,title:s,figure:`Source ${n}`,children:(0,l.jsx)(c.A,{id:t})})}function u(e){let{url:t,figure:n,title:s}=e;return(0,l.jsx)(d,{modeAware:!1,figure:n,title:s,children:(0,l.jsx)("img",{alt:"{title}",src:t})})}function f(e){let{children:t,figure:n,title:s}=e;return(0,l.jsx)(d,{modeAware:!0,figure:n,title:s,children:t})}function m(e){let{when:t,where:n}=e;const[s,i]=n;return(0,l.jsxs)("div",{children:["This article was originally published in ",t," at ",(0,l.jsx)("a",{target:"_blank",href:i,children:s}),". Some formatting might have get lost during the migration to this site: If you think you spotted an issue caused by malformed formatting, feel free to open a ",(0,l.jsx)("a",{href:"https://github.com/ThorstenSuckow/thorsten.suckow-homberg.de",children:"Pull Request"})," or ",(0,l.jsx)("a",{href:"mailto:thorsten@suckow-homberg.de",children:"send me an Email"}),"."]})}function p(e){let{url:t}=e;const[n,i]=s.useState("");return a()(t).then((e=>{e.text().then((e=>i(e)))})),(0,l.jsx)(r.A,{language:"php",children:n})}},3271:(e,t,n)=>{"use strict";n.d(t,{R5:()=>i,I8:()=>i,Dn:()=>r,lA:()=>o,E4:()=>i,$1:()=>o});n(6540);var s=n(4848);function i(e){let{name:t,pp:n,add:i}=e;const r=`#bibref-${t.toLowerCase()}`;return(0,s.jsxs)("a",{href:r,children:["[",(0,s.jsxs)("span",{className:"bibRef",children:["\ud83d\udcd6",t]}),i?`, ${i} `:"",n?`, ${n.includes("-")?"pp":"p"}. ${n}`:"","]"]})}function r(e){let{idx:t}=e;return(0,s.jsx)("a",{href:`#fig_${t}`,children:(0,s.jsxs)("span",{className:"bibRef",children:["Figure ",t]})})}function o(e){let{name:t,file:n,url:i}=e;n=n||(i||""),Object.entries({sd:"softwaredesign",sa:"softwarearchitecture",cs:"computerscience"}).some((e=>{let[t,s]=e;if(n.startsWith(`${t}.`))return n=n.replace(`${t}.`,`${s}.`),!0}));const r=`/docs/wiki/${n}`;return(0,s.jsx)("a",{href:r,className:"glosRef",children:t})}},6468:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>l,bibRefs:()=>d,contentTitle:()=>c,default:()=>f,frontMatter:()=>a,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"wiki/softwaredesign.factorymethod","title":"Factory Method","description":"A Factory Method is a method for creating a new object for a given type.","source":"@site/docs/wiki/softwaredesign.factorymethod.mdx","sourceDirName":"wiki","slug":"/wiki/softwaredesign.factorymethod","permalink":"/docs/wiki/softwaredesign.factorymethod","draft":false,"unlisted":false,"editUrl":"https://github.com/thorstensuckow/thorsten.suckow-homberg.de/tree/main/docs/wiki/softwaredesign.factorymethod.mdx","tags":[],"version":"current","lastUpdatedBy":"ThorstenSuckow","lastUpdatedAt":1756842141000,"frontMatter":{"title":"Factory Method"},"sidebar":"wiki","previous":{"title":"Facade","permalink":"/docs/wiki/softwaredesign.facade"},"next":{"title":"First-Class Citizen","permalink":"/docs/wiki/computerscience.firstclasscitizen"}}');var i=n(4848),r=n(8453),o=n(3271);n(2172);const a={title:"Factory Method"},c="Factory Method (Software Design)",l={},d=["GOF"],h=[{value:"Example",id:"example",level:2}];function u(e){const t={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"factory-method-software-design",children:"Factory Method (Software Design)"})}),"\n",(0,i.jsxs)(t.p,{children:["A ",(0,i.jsx)(t.strong,{children:"Factory Method"})," is a method for creating a new object for a given type."]}),"\n",(0,i.jsx)(t.p,{children:"By using a method call for object instantiation, the method can further implement checks for constraints, invariants and dependencies that need to be configured with the object of the target class."}),"\n",(0,i.jsx)(t.p,{children:"This has the advantage that a constructor can solely focus on initializing the fields of the object with the information that were applied from outside, and can be kept free from additional logic. The client can more easily recover from any errors the factory may produce."}),"\n",(0,i.jsxs)(t.admonition,{title:"The GOF-factory method",type:"tip",children:[(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.strong,{children:"Factory Method"}),"-pattern belongs to the ",(0,i.jsx)(t.strong,{children:"Creational Patterns"}),(0,i.jsx)(o.R5,{name:"GOF",pp:"88-ff."})," and is described in ",(0,i.jsx)(o.R5,{name:"GOF",pp:"107-116"}),"."]}),(0,i.jsx)(t.p,{children:"The pattern described by GoF narrows the applicability to a very specific problem down:"}),(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.em,{children:'"Define an interface for creating an object, but let subclasses decide which class to\ninstantiate. Factory Method lets a class defer instantiation to subclasses."'})," ",(0,i.jsx)(o.R5,{name:"GOF",pp:"107"})]}),"\n"]}),(0,i.jsxs)(t.p,{children:["I treat the meaning of ",(0,i.jsx)(t.strong,{children:"Factory Method"})," with the main intent described in this Toolbox-entry not as an exclusive-or regarding the ",(0,i.jsx)(t.strong,{children:"GoF"}),"-definition, but as a union."]})]}),"\n",(0,i.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,i.jsxs)(t.p,{children:["In the following example, a ",(0,i.jsx)(t.code,{children:"Route"}),"-object can only be created if ",(0,i.jsx)(t.code,{children:"$legs"})," has at least one entry. The example uses the ",(0,i.jsx)(t.code,{children:"__constructor()"}),"\nwhich requires the class to implement the specification in this method."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-php",metastring:'title="Logic in constructor"',children:'class Route\n{\n    private ?Legs $legs = null;\n\n    public function __construct(Legs $legs)\n    {\n        if ($legs->entries() === 0) {\n            throw new RouteException("Route needs at least one leg");\n        }\n\n        $this->legs = legs;\n    }\n}\n'})}),"\n",(0,i.jsx)(t.p,{children:"The constructor should not be aware of such details, more so, shouldn't be aware that such a specification exists, as this would require the constructor to be able to make a decision whether it may exists as an instance or not."}),"\n",(0,i.jsx)(t.p,{children:"By placing the specification on class-level as a meta-information with a factory-method, the responsibility for meeting the constraints and whether instances are allowed are then delegated to the factory method, serving as a mediator between the client and the target instance:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-php",metastring:'title="Logic in factory method"',children:'class Route\n{\n    private ?Legs $legs = null;\n\n    public static function create(Legs $legs): Route\n    {\n        if ($legs->entries() === 0) {\n            throw new RouteException("Route needs at least one leg");\n        }\n    }\n\n    private function __construct(Legs $legs)\n    {\n        $this->legs = legs;\n    }\n}\n'})}),"\n",(0,i.jsxs)(t.admonition,{type:"note",children:[(0,i.jsxs)(t.p,{children:["In the example above, the whole process of ",(0,i.jsx)(t.code,{children:"Route"}),"-creation is placed into the factory-method. This might be problematic if ",(0,i.jsx)(t.strong,{children:"IoC"})," is applied and injecting dependencies relies on the existence of a ",(0,i.jsx)(t.em,{children:"public"})," available ",(0,i.jsx)(t.em,{children:"constructor"}),". ",(0,i.jsx)(t.a,{href:"https://spring.io/",children:"Spring"})," allows for ",(0,i.jsx)(t.a,{href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-class-static-factory-method",children:"registering factory methods,"})," so they can be considered when ",(0,i.jsx)(o.lA,{name:"Dependency Injection",file:"sd.dependencyinjection"})," is used:"]}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-xml",children:'<bean id="routeBean" class="tracking.RouteBean" factory-method="createInstance" />\n'})}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"public class RouteBean {\n\n    private Route()\n    {\n    }\n\n    public static RouteBean createInstance ()\n    {\n        RouteBean rb = new RouteBean ();\n        return rb;\n    }\n}\n"})})]})]})}function f(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},8453:(e,t,n)=>{"use strict";n.d(t,{R:()=>o,x:()=>a});var s=n(6540);const i={},r=s.createContext(i);function o(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);