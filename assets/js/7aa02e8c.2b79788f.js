(self.webpackChunkthorsten_suckow_homberg_de=self.webpackChunkthorsten_suckow_homberg_de||[]).push([[7083],{3905:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>l,kt:()=>u});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=a.createContext({}),m=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},l=function(e){var t=m(e.components);return a.createElement(p.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,p=e.parentName,l=r(e,["components","mdxType","originalType","parentName"]),c=m(n),h=o,u=c["".concat(p,".").concat(h)]||c[h]||d[h]||i;return n?a.createElement(u,s(s({ref:t},l),{},{components:n})):a.createElement(u,s({ref:t},l))}));function u(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,s=new Array(i);s[0]=h;var r={};for(var p in t)hasOwnProperty.call(t,p)&&(r[p]=t[p]);r.originalType=e,r[c]="string"==typeof e?e:o,s[1]=r;for(var m=2;m<i;m++)s[m]=n[m];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},4461:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var a=n(7294);function o(){return a.createElement("div",{style:{width:"100%",textAlign:"right"}},a.createElement("a",{style:{textDecoration:"underline"},onClick:()=>history.go(-1),href:"#"},"Back"))}},2490:(e,t,n)=>{"use strict";n.d(t,{$o:()=>l,_b:()=>d,cx:()=>m,e2:()=>c,in:()=>u,t2:()=>h});var a=n(7294),o=n(5075),i=n(9943),s=n(814),r=n(4098),p=n.n(r);function m(e){let{width:t,children:n,title:i,figure:s,modeAware:r}=e;return a.createElement("div",{style:{width:t,textAlign:"center",margin:20}},a.createElement("div",{className:!1!==r?"umlImg":""},n),a.createElement("div",{style:{textAlign:"center"}},a.createElement("sup",null,a.createElement("b",null,o.Z.isString(s)?s:`Figure ${s??1}`)," ",a.createElement("span",{dangerouslySetInnerHTML:{__html:i}}))))}function l(e){let{id:t,source:n,title:o}=e;return a.createElement(m,{modeAware:!1,title:o,figure:`Source ${n}`},a.createElement(i.Z,{id:t}))}function c(e){let{url:t,figure:n,title:o}=e;return a.createElement(m,{modeAware:!1,figure:n,title:o},a.createElement("img",{alt:"{title}",src:t}))}function d(e){let{children:t,figure:n,title:o}=e;return a.createElement(m,{modeAware:!0,figure:n,title:o,children:t})}function h(e){let{when:t,where:n}=e;const[o,i]=n;return a.createElement("div",null,"This article was originally published in ",t," at ",a.createElement("a",{target:"_blank",href:i},o),". Some formatting might have get lost during the migration to this site: If you think you spotted an issue caused by malformed formatting, feel free to open a ",a.createElement("a",{href:"https://github.com/ThorstenSuckow/thorsten.suckow-homberg.de"},"Pull Request")," or ",a.createElement("a",{href:"mailto:thorsten@suckow-homberg.de"},"send me an Email"),".")}function u(e){let{url:t}=e;const[n,o]=a.useState("");return p()(t).then((e=>{e.text().then((e=>o(e)))})),a.createElement(s.Z,{language:"php"},n)}},6739:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,E:()=>o});var a=n(7294);function o(e){let{name:t,pp:n}=e;const o=`/docs/bibliography#${t.toLowerCase()}`;return a.createElement("a",{href:o},"[",a.createElement("span",{className:"bibRef"},"\ud83d\udcd6",t),n?`, ${n.includes("-")?"pp":"p"}. ${n}`:"","]")}function i(e){let{name:t,file:n}=e;Object.entries({sd:"softwaredesign",sa:"softwarearchitecture",cs:"computerscience"}).some((e=>{let[t,a]=e;if(n.startsWith(`${t}.`))return n=n.replace(`${t}.`,`${a}.`),!0}));const o=`/docs/toolbox/${n}`;return a.createElement("a",{href:o,className:"glosRef"},t)}},4302:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>k,contentTitle:()=>h,default:()=>y,frontMatter:()=>d,metadata:()=>u,toc:()=>g});var a=n(7462),o=(n(7294),n(3905)),i=n(4461),s=n(2490),r=n(6739);const p=n.p+"assets/images/composite-parts.svg-4882c16583d94b32f4e3bb736bf584b2.png",m=n.p+"assets/images/address-composition.svg-391102c68e2b55a53f19d1928ec4b3ff.png",l=n.p+"assets/images/company-employee-address-aggregation.svg-8e4258279bb8b192e16c07c68e65a04d.png",c=n.p+"assets/images/company-employee-department.svg-4ca0c931059e333a7053aed6d779c83e.png",d={title:"Composition"},h="Composition (UML)",u={unversionedId:"toolbox/uml.composition",id:"toolbox/uml.composition",title:"Composition",description:"A Composition is an  and designates a special form of an . It is used in cases where the abstraction of a model requires a strong emphasis on the whole/part-relationship, approximately corresponding to denoting a parent/child-relationship of the elements within the Composition.",source:"@site/docs/toolbox/uml.composition.mdx",sourceDirName:"toolbox",slug:"/toolbox/uml.composition",permalink:"/docs/toolbox/uml.composition",draft:!1,editUrl:"https://github.com/thorstensuckow/thorsten.suckow-homberg.de/tree/main/docs/toolbox/uml.composition.mdx",tags:[],version:"current",lastUpdatedBy:"Thorsten Suckow-Homberg",lastUpdatedAt:1726416657,formattedLastUpdatedAt:"Sep 15, 2024",frontMatter:{title:"Composition"},sidebar:"toolbox",previous:{title:"BoundedContext",permalink:"/docs/toolbox/ddd.boundedcontext"},next:{title:"Core Domain",permalink:"/docs/toolbox/ddd.coredomain"}},k={},g=[{value:"Lifecycle",id:"lifecycle",level:3},{value:"The &quot;one-composite-at-a-time&quot;-rule",id:"the-one-composite-at-a-time-rule",level:3},{value:"Example",id:"example",level:2},{value:"Lifecycle impacts",id:"lifecycle-impacts",level:3}],f={toc:g},N="wrapper";function y(e){let{components:t,...n}=e;return(0,o.kt)(N,(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"composition-uml"},"Composition (UML)"),(0,o.kt)("p",null,"A ",(0,o.kt)("strong",{parentName:"p"},"Composition")," is an ",(0,o.kt)(r.A,{name:"Association",file:"uml.association",mdxType:"GlosRef"})," and designates a special form of an ",(0,o.kt)(r.A,{name:"Aggregation",file:"uml.aggregation",mdxType:"GlosRef"}),". It is used in cases where the abstraction of a model requires a strong emphasis on the whole/part-relationship, approximately corresponding to denoting a parent/child-relationship of the elements within the ",(0,o.kt)("strong",{parentName:"p"},"Composition"),"."),(0,o.kt)("p",null,"A ",(0,o.kt)("strong",{parentName:"p"},"Composition")," between entities can be illustrated in ",(0,o.kt)("strong",{parentName:"p"},"UML")," with a filled diamond-shaped adornment starting at the root of the ",(0,o.kt)("strong",{parentName:"p"},"Composition")," (the ",(0,o.kt)("strong",{parentName:"p"},"composite"),"), then connecting to its part(s) with a solid line."),(0,o.kt)(s.cx,{figure:2,title:"A composite and its parts.",mdxType:"Embed"},(0,o.kt)("img",{src:p})),(0,o.kt)("p",null,"In a ",(0,o.kt)("strong",{parentName:"p"},"Composition"),", the owning element (the ",(0,o.kt)("strong",{parentName:"p"},"Composite"),") is responsible for the lifetime of its parts.\nIn a system, ",(0,o.kt)("strong",{parentName:"p"},"Compositions")," do not share instances of their parts: Each part always belongs to only one ",(0,o.kt)("strong",{parentName:"p"},"composite")," at a time.\nAs such, the parts of a ",(0,o.kt)("strong",{parentName:"p"},"composite")," share the lifetime of the owning ",(0,o.kt)("strong",{parentName:"p"},"composite"),": If the ",(0,o.kt)("strong",{parentName:"p"},"composite")," is destroyed, its parts are destroyed,\ntoo. However, there is an important detail in this statement (see ",(0,o.kt)("a",{parentName:"p",href:"#lifecycle"},"Lifecycle"),")."),(0,o.kt)("h3",{id:"lifecycle"},"Lifecycle"),(0,o.kt)("p",null,"The following applies to the relationship between a ",(0,o.kt)("strong",{parentName:"p"},"composite")," ",(0,o.kt)("inlineCode",{parentName:"p"},"A")," and its parts :"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"the owning object ",(0,o.kt)("inlineCode",{parentName:"li"},"A")," is solely responsible for its parts"),(0,o.kt)("li",{parentName:"ul"},"the parts may not belong to another ",(0,o.kt)("strong",{parentName:"li"},"composite"),", for as long as they belong to ",(0,o.kt)("inlineCode",{parentName:"li"},"A"),".")),(0,o.kt)("p",null,"This implies that the parts ",(0,o.kt)("strong",{parentName:"p"},"exclusively belong")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"A"),", for as long as ",(0,o.kt)("inlineCode",{parentName:"p"},"A")," exists, and ",(0,o.kt)("inlineCode",{parentName:"p"},"A")," is responsible for the deposition\nof its parts. ",(0,o.kt)("strong",{parentName:"p"},"That must not necessarily mean that the parts are ",(0,o.kt)("em",{parentName:"strong"},"destroyed")," when ",(0,o.kt)("inlineCode",{parentName:"strong"},"A")," is ",(0,o.kt)("em",{parentName:"strong"},"destroyed")),". Rather, ",(0,o.kt)("inlineCode",{parentName:"p"},"A")," sets up the constraints for what happens to its parts once it gets destroyed. It is entirely possible that existing parts might become the parts of another ",(0,o.kt)("strong",{parentName:"p"},"composite"),". However, the deposition must be controlled through ",(0,o.kt)("inlineCode",{parentName:"p"},"A"),".\n",(0,o.kt)("em",{parentName:"p"},"Rumbaugh et al.")," state that once the owning element is destroyed, the owning element may either destroy its parts, too, or ",(0,o.kt)("strong",{parentName:"p"},"permit")," other elements to take ownership:"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("em",{parentName:"p"},'"If the composite is destroyed, it must either destroy all its parts or else give responsibility for them to other objects."')," ",(0,o.kt)(r.E,{name:"UREF",pp:"227",mdxType:"BibRef"}))),(0,o.kt)("h3",{id:"the-one-composite-at-a-time-rule"},'The "one-composite-at-a-time"-rule'),(0,o.kt)("p",null,"A ",(0,o.kt)("strong",{parentName:"p"},"Composition")," serves as an abstraction to parent/child-relationships. It is defined through the sum of its parts, i.e. the ",(0,o.kt)("strong",{parentName:"p"},"owning object")," and its parts with the prerequisite that a ",(0,o.kt)("strong",{parentName:"p"},"Composition")," - as a stronger form of an ",(0,o.kt)("strong",{parentName:"p"},"Aggregation")," - maintains and controls references to its parts, and no other object must do this for as long as the owning composite exists. Other elements may reference the parts, but they may not control their lifecycle."),(0,o.kt)("p",null,"In the Toolbox-entry ",(0,o.kt)(r.A,{name:"Association",file:"uml.Association",mdxType:"GlosRef"}),", the ",(0,o.kt)("inlineCode",{parentName:"p"},"Company"),"'s and  ",(0,o.kt)("inlineCode",{parentName:"p"},"Employee"),"'s relationship with ",(0,o.kt)("inlineCode",{parentName:"p"},"Address")," is  modelled as plain ",(0,o.kt)("strong",{parentName:"p"},"Association"),"."),(0,o.kt)("p",null,"We understand that ",(0,o.kt)("inlineCode",{parentName:"p"},"Company")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"Employee")," ",(0,o.kt)("strong",{parentName:"p"},"must not share")," the same ",(0,o.kt)("inlineCode",{parentName:"p"},"Address"),"-objects, since changing an address\n",(0,o.kt)("span",{parentName:"p",className:"math math-inline"},(0,o.kt)("span",{parentName:"span",className:"katex"},(0,o.kt)("span",{parentName:"span",className:"katex-mathml"},(0,o.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,o.kt)("semantics",{parentName:"math"},(0,o.kt)("mrow",{parentName:"semantics"},(0,o.kt)("mi",{parentName:"mrow"},"A")),(0,o.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"A")))),(0,o.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,o.kt)("span",{parentName:"span",className:"base"},(0,o.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6833em"}}),(0,o.kt)("span",{parentName:"span",className:"mord mathnormal"},"A")))))," for ",(0,o.kt)("inlineCode",{parentName:"p"},"Company")," ",(0,o.kt)("span",{parentName:"p",className:"math math-inline"},(0,o.kt)("span",{parentName:"span",className:"katex"},(0,o.kt)("span",{parentName:"span",className:"katex-mathml"},(0,o.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,o.kt)("semantics",{parentName:"math"},(0,o.kt)("mrow",{parentName:"semantics"},(0,o.kt)("mi",{parentName:"mrow"},"C")),(0,o.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"C")))),(0,o.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,o.kt)("span",{parentName:"span",className:"base"},(0,o.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6833em"}}),(0,o.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.07153em"}},"C")))))," would also change the data for ",(0,o.kt)("inlineCode",{parentName:"p"},"Employee")," ",(0,o.kt)("span",{parentName:"p",className:"math math-inline"},(0,o.kt)("span",{parentName:"span",className:"katex"},(0,o.kt)("span",{parentName:"span",className:"katex-mathml"},(0,o.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,o.kt)("semantics",{parentName:"math"},(0,o.kt)("mrow",{parentName:"semantics"},(0,o.kt)("mi",{parentName:"mrow"},"E")),(0,o.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"E")))),(0,o.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,o.kt)("span",{parentName:"span",className:"base"},(0,o.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6833em"}}),(0,o.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.05764em"}},"E"))))),". The formal definition for a ",(0,o.kt)("strong",{parentName:"p"},"Composition")," in ",(0,o.kt)("strong",{parentName:"p"},"UML")," rules the simultaneously existence of more than one owning object out."),(0,o.kt)("p",null,"How should a model depict the relationship between those elements? An Address is unique, so wouldn't it make sense to share addresses to prevent redundancy? The ",(0,o.kt)("strong",{parentName:"p"},"Association")," example shows that it would be good practice to use ",(0,o.kt)(r.A,{name:"Value Objects",file:"sd.valueobject",mdxType:"GlosRef"}),":\nFor as long as shared addresses do not change their values, owning objects may reference the same instances which will help with keeping memory footprint low. However, designing the model as a ",(0,o.kt)("strong",{parentName:"p"},"Composition")," forbids such an implementation:"),(0,o.kt)(s.cx,{figure:3,title:"Each Company and Employee denote a Composite with an Address being one of its parts, but implementing the model so that instances are shared violates the definition of a Composition in UML.",mdxType:"Embed"},(0,o.kt)("img",{src:m})),(0,o.kt)("p",null,"If ",(0,o.kt)("strong",{parentName:"p"},"Address")," is navigable through ",(0,o.kt)("inlineCode",{parentName:"p"},"Employee")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"Company"),",\nand there is an instance that is shared by both ",(0,o.kt)("inlineCode",{parentName:"p"},"Employee")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"Company"),", which of those elements is then considered to be the owning object of ",(0,o.kt)("inlineCode",{parentName:"p"},"Address"),"? Not using arrows as indicators for the navigability doesn't help in this case: If a ",(0,o.kt)("strong",{parentName:"p"},"Composition")," is used in a design, then a part of it ",(0,o.kt)("em",{parentName:"p"},'"may be part of only one composite object at a time."')," ",(0,o.kt)(r.E,{name:"UREF",pp:"228",mdxType:"BibRef"})," and further ",(0,o.kt)("em",{parentName:"p"},'"during the life of the composite, no other object may have responsibility for it."')," ",(0,o.kt)(r.E,{name:"UREF",pp:"227",mdxType:"BibRef"})),(0,o.kt)("p",null,"Modeling the relationship as an ",(0,o.kt)("strong",{parentName:"p"},"Aggregation")," provides a looser contract on the relationship between the element, and permits the developers to choose implementation details like applying the ",(0,o.kt)("strong",{parentName:"p"},"Value Object"),"-design to ",(0,o.kt)("inlineCode",{parentName:"p"},"Address"),"."),(0,o.kt)(s.cx,{figure:4,title:"The relationship modelled as Aggregation. Each Company and Employee may share instances of Addresses now.",mdxType:"Embed"},(0,o.kt)("img",{src:l})),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)("p",null,"The following model hold ",(0,o.kt)("strong",{parentName:"p"},"Compositions")," and ",(0,o.kt)("strong",{parentName:"p"},"Aggregations"),":"),(0,o.kt)(s.cx,{figure:4,title:"A Department is a Composite wit one to n Employees. An Employee can only belong to one Department.",mdxType:"Embed"},(0,o.kt)("img",{src:c})),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Company")," is the ",(0,o.kt)("strong",{parentName:"li"},"composite")," for ",(0,o.kt)("inlineCode",{parentName:"li"},"Employee"),"s"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Company")," is the ",(0,o.kt)("strong",{parentName:"li"},"composite")," for ",(0,o.kt)("inlineCode",{parentName:"li"},"Department"),"s"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Department"),"is an ",(0,o.kt)("strong",{parentName:"li"},"aggregate")," for ",(0,o.kt)("inlineCode",{parentName:"li"},"Employee"),"s"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Employee")," is the ",(0,o.kt)("strong",{parentName:"li"},"composite")," for ",(0,o.kt)("inlineCode",{parentName:"li"},"Account"))),(0,o.kt)("p",null,"A ",(0,o.kt)("inlineCode",{parentName:"p"},"Company")," has at least one ",(0,o.kt)("inlineCode",{parentName:"p"},"Employee"),".\nOne ",(0,o.kt)("inlineCode",{parentName:"p"},"Employee")," has one ",(0,o.kt)("inlineCode",{parentName:"p"},"Account"),". An ",(0,o.kt)("inlineCode",{parentName:"p"},"Account")," knows the ",(0,o.kt)("inlineCode",{parentName:"p"},"Employee")," it belongs to."),(0,o.kt)("p",null,"A ",(0,o.kt)("inlineCode",{parentName:"p"},"Department")," is associated with multiple ",(0,o.kt)("inlineCode",{parentName:"p"},"Employee"),"s."),(0,o.kt)("h3",{id:"lifecycle-impacts"},"Lifecycle impacts"),(0,o.kt)("p",null,"If an ",(0,o.kt)("inlineCode",{parentName:"p"},"Employee")," leaves the ",(0,o.kt)("inlineCode",{parentName:"p"},"Company"),", the ",(0,o.kt)("strong",{parentName:"p"},"link")," to the ",(0,o.kt)("inlineCode",{parentName:"p"},"Employee"),"'s ",(0,o.kt)("inlineCode",{parentName:"p"},"Account")," is also destroyed: Without an ",(0,o.kt)("inlineCode",{parentName:"p"},"Employee"),", an ",(0,o.kt)("inlineCode",{parentName:"p"},"Account")," has no meaning in this context and model."),(0,o.kt)("p",null,"If a ",(0,o.kt)("inlineCode",{parentName:"p"},"Department")," closes, it has no impact to the Departments ",(0,o.kt)("inlineCode",{parentName:"p"},"Employee"),"s: They remain in the ",(0,o.kt)("inlineCode",{parentName:"p"},"Company"),"."),(0,o.kt)("p",null,"If the ",(0,o.kt)("inlineCode",{parentName:"p"},"Company")," closes, the ",(0,o.kt)("inlineCode",{parentName:"p"},"Department"),"s shut down.\nClosing the ",(0,o.kt)("inlineCode",{parentName:"p"},"Company")," also removes all its ",(0,o.kt)("inlineCode",{parentName:"p"},"Employee"),"s in the given model."),(0,o.kt)(i.x,{mdxType:"BackButton"}))}y.isMDXComponent=!0},2480:()=>{}}]);